{
  "version": 3,
  "sources": ["../src/index.js", "../src/i18n/default.i18n.js", "../src/core/default-options.js", "../src/core/renderers/shell-renderer.js", "../src/core/renderers/header-renderer.js", "../src/core/renderers/body-renderer.js", "../src/core/renderers/footer-renderer.js", "../src/core/themes/theme-manager.js", "../src/core/renderer.js", "../src/core/parallel/projection-worker-pool.js", "../src/core/state-store.js", "../src/utils/deep-merge.js", "../src/utils/event-emitter.js", "../src/core/data-sources/client-data-source.js", "../src/core/data-sources/server-data-source.js", "../src/core/data-sources/create-data-source.js", "../src/core/sync/state-sync.js", "../src/core/vanilla-table.js", "../src/plugins/striped-rows.js", "../src/plugins/theme-plugin.js", "../src/plugins/bootstrap-theme.js", "../src/plugins/bulma-theme.js", "../src/plugins/mui-theme.js", "../src/plugins/tailwind-theme.js", "../src/plugins/actions-dropdown.js", "../src/adapters/server-adapters.js"],
  "sourcesContent": ["import { VanillaTable } from './core/vanilla-table.js';\nimport { stripedRowsPlugin } from './plugins/striped-rows.js';\nimport { themePlugin } from './plugins/theme-plugin.js';\nimport { bootstrapThemePlugin } from './plugins/bootstrap-theme.js';\nimport { bulmaThemePlugin } from './plugins/bulma-theme.js';\nimport { muiThemePlugin } from './plugins/mui-theme.js';\nimport { tailwindThemePlugin } from './plugins/tailwind-theme.js';\nimport { actionsDropdownPlugin } from './plugins/actions-dropdown.js';\nimport { createRestAdapter, createGraphQLAdapter, createCursorAdapter } from './adapters/server-adapters.js';\n\nexport {\n  VanillaTable,\n  stripedRowsPlugin,\n  themePlugin,\n  bootstrapThemePlugin,\n  bulmaThemePlugin,\n  muiThemePlugin,\n  tailwindThemePlugin,\n  actionsDropdownPlugin,\n  createRestAdapter,\n  createGraphQLAdapter,\n  createCursorAdapter\n};\n\n/**\n * Creates and initializes a table instance.\n *\n * @param {HTMLElement} element\n * @param {Record<string, any>[]} rows\n * @param {Record<string, any>} [options]\n * @returns {VanillaTable}\n */\nexport function createVanillaTable(element, rows, options) {\n  return new VanillaTable(element, rows, options).init();\n}\n", "export const defaultI18n = {\n  search: 'Search',\n  filter: 'Filter',\n  rows: 'Rows',\n  actions: 'Actions',\n  loading: 'Loading...',\n  empty: 'No results found',\n  pageInfo: 'Page {page} of {totalPages} ({totalRows} rows)',\n  first: 'First',\n  prev: 'Previous',\n  next: 'Next',\n  last: 'Last'\n};\n", "import { defaultI18n } from '../i18n/default.i18n.js';\n\n/**\n * Defines baseline plugin options.\n */\nexport const defaultOptions = {\n  pageSize: 10,\n  pageSizeOptions: [10, 25, 50, 100],\n  searchable: true,\n  columnFilters: true,\n  sortable: true,\n  multiSort: true,\n  maxSorts: 3,\n  pagination: true,\n  initialSort: null,\n  debounceMs: 120,\n  fixedHeader: false,\n  fixedFooter: false,\n  fixedColumns: 0,\n  fixedTopRows: 0,\n  expandableRows: false,\n  editableRows: false,\n  editableColumns: {},\n  rowIdKey: 'id',\n  serverSide: false,\n  fetchData: null,\n  virtualScroll: {\n    enabled: false,\n    rowHeight: 40,\n    overscan: 6,\n    height: 420\n  },\n  parallel: {\n    enabled: true,\n    threshold: 20000,\n    workers: 'auto',\n    timeoutMs: 4000,\n    retries: 1\n  },\n  persistence: {\n    enabled: false,\n    storageKey: null\n  },\n  urlSync: {\n    enabled: false,\n    param: 'vt'\n  },\n  columnResize: true,\n  columnReorder: true,\n  rowActions: [],\n  events: {\n    debug: false\n  },\n  themeClasses: {},\n  expandRow: null,\n  i18n: defaultI18n,\n  labels: {\n    search: defaultI18n.search,\n    filter: defaultI18n.filter,\n    rows: defaultI18n.rows,\n    actions: defaultI18n.actions,\n    loading: defaultI18n.loading,\n    pageInfo: ({ page, totalPages, totalRows }) =>\n      defaultI18n.pageInfo\n        .replace('{page}', String(page))\n        .replace('{totalPages}', String(totalPages))\n        .replace('{totalRows}', String(totalRows)),\n    empty: defaultI18n.empty,\n    first: defaultI18n.first,\n    prev: defaultI18n.prev,\n    next: defaultI18n.next,\n    last: defaultI18n.last\n  },\n  columns: []\n};\n", "/**\n * Renders static shell markup and resolves DOM references.\n */\nexport class ShellRenderer {\n  /**\n   * Creates a shell renderer instance.\n   *\n   * @param {{ root: HTMLElement, options: Record<string, any>, theme: import('../themes/theme-manager.js').ThemeManager }} config\n   */\n  constructor({ root, options, theme }) {\n    /** @type {HTMLElement} */\n    this.root = root;\n    /** @type {Record<string, any>} */\n    this.options = options;\n    /** @type {import('../themes/theme-manager.js').ThemeManager} */\n    this.theme = theme;\n  }\n\n  /**\n   * Mounts static shell structure.\n   *\n   * @returns {Record<string, HTMLElement>}\n   */\n  mount() {\n    this.root.innerHTML = `\n      <div class=\"${this.theme.classOf('shell', 'vt-shell')}\">\n        <div class=\"${this.theme.classOf('controls', 'vt-controls')}\">\n          <label class=\"${this.theme.classOf('sizeWrap', 'vt-size-wrap')}\">\n            <span>${this.options.labels.rows}</span>\n            <select class=\"${this.theme.classOf('sizeSelect', 'vt-size')}\"></select>\n          </label>\n          <label class=\"${this.theme.classOf('searchWrap', 'vt-search-wrap')}\">\n            <span>${this.options.labels.search}</span>\n            <input class=\"${this.theme.classOf('searchInput', 'vt-search')}\" type=\"search\" placeholder=\"Type to filter...\" />\n          </label>\n        </div>\n        <div class=\"${this.theme.classOf('tableWrap', 'vt-table-wrap')}\" style=\"${this.options.virtualScroll.enabled ? `height:${this.options.virtualScroll.height}px;overflow:auto;` : ''}\">\n          <table class=\"${this.theme.classOf('table', 'vt-table')}\" role=\"grid\" aria-rowcount=\"-1\">\n            <thead></thead>\n            <tbody></tbody>\n          </table>\n        </div>\n        <div class=\"${this.theme.classOf('footer', 'vt-footer')} ${this.options.fixedFooter ? this.theme.classOf('fixedFooter', 'vt-fixed-footer') : ''}\">\n          <span class=\"${this.theme.classOf('info', 'vt-info')}\"></span>\n          <div class=\"${this.theme.classOf('paginationGroup', 'vt-pagination-group')}\">\n            <button class=\"${this.theme.classOf('firstButton', 'vt-page-btn vt-first')}\" type=\"button\">${this.options.labels.first}</button>\n            <button class=\"${this.theme.classOf('prevButton', 'vt-page-btn vt-prev')}\" type=\"button\">${this.options.labels.prev}</button>\n            <button class=\"${this.theme.classOf('nextButton', 'vt-page-btn vt-next')}\" type=\"button\">${this.options.labels.next}</button>\n            <button class=\"${this.theme.classOf('lastButton', 'vt-page-btn vt-last')}\" type=\"button\">${this.options.labels.last}</button>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const refs = {\n      search: this.root.querySelector('.vt-search'),\n      pageSize: this.root.querySelector('.vt-size'),\n      tableWrap: this.root.querySelector('.vt-table-wrap'),\n      table: this.root.querySelector('.vt-table'),\n      thead: this.root.querySelector('thead'),\n      tbody: this.root.querySelector('tbody'),\n      info: this.root.querySelector('.vt-info'),\n      first: this.root.querySelector('.vt-first'),\n      prev: this.root.querySelector('.vt-prev'),\n      next: this.root.querySelector('.vt-next'),\n      last: this.root.querySelector('.vt-last')\n    };\n\n    refs.pageSize.innerHTML = this.options.pageSizeOptions\n      .map((size) => `<option value=\"${size}\">${size}</option>`)\n      .join('');\n    refs.pageSize.value = String(this.options.pageSize);\n\n    if (!this.options.searchable) {\n      refs.search.closest('.vt-search-wrap').style.display = 'none';\n    }\n\n    if (!this.options.pagination) {\n      this.root.querySelector('.vt-footer').style.display = 'none';\n    }\n\n    return refs;\n  }\n}\n", "/**\n * Renders table header with sort and filter controls.\n */\nexport class HeaderRenderer {\n  /**\n   * Creates a header renderer instance.\n   *\n   * @param {{ options: Record<string, any>, theme: import('../themes/theme-manager.js').ThemeManager }} config\n   */\n  constructor({ options, theme }) {\n    /** @type {Record<string, any>} */\n    this.options = options;\n    /** @type {import('../themes/theme-manager.js').ThemeManager} */\n    this.theme = theme;\n  }\n\n  /**\n   * Renders header rows.\n   *\n   * @param {HTMLTableSectionElement} thead\n   * @param {{ key: string, label: string, sortable?: boolean, filterable?: boolean }[]} columns\n   * @param {{ key: string, direction: 'asc'|'desc' }[]} sortState\n   * @param {Record<string, string>} columnFilters\n   * @param {(cell: HTMLElement, visualIndex: number) => void} applyFixedColumn\n   * @param {Record<string, number>} columnWidths\n   * @returns {void}\n   */\n  render(thead, columns, sortState, columnFilters, applyFixedColumn, columnWidths) {\n    const headRows = [];\n    const sortRow = document.createElement('tr');\n    sortRow.setAttribute('role', 'row');\n\n    if (this.options.expandableRows) {\n      const expandHeader = document.createElement('th');\n      expandHeader.className = this.theme.classOf('headerCell', 'vt-header-cell');\n      sortRow.appendChild(expandHeader);\n    }\n\n    columns.forEach((column, index) => {\n      const th = document.createElement('th');\n      th.className = this.theme.classOf('headerCell', 'vt-header-cell');\n      th.dataset.key = column.key;\n      th.draggable = Boolean(this.options.columnReorder);\n      th.tabIndex = 0;\n      th.setAttribute('role', 'columnheader');\n      applyFixedColumn(th, index + (this.options.expandableRows ? 1 : 0));\n\n      if (columnWidths[column.key]) {\n        th.style.width = `${columnWidths[column.key]}px`;\n      }\n\n      const button = document.createElement('button');\n      button.type = 'button';\n      button.className = this.theme.classOf('sortTrigger', 'vt-sort-trigger');\n      button.dataset.key = column.key;\n\n      const sortIndex = sortState.findIndex((item) => item.key === column.key);\n      const sortMeta = sortIndex >= 0 ? sortState[sortIndex] : null;\n      const marker = sortMeta\n        ? sortMeta.direction === 'asc'\n          ? ` \u25B2${sortState.length > 1 ? ` ${sortIndex + 1}` : ''}`\n          : ` \u25BC${sortState.length > 1 ? ` ${sortIndex + 1}` : ''}`\n        : '';\n\n      button.textContent = `${column.label}${marker}`;\n      button.disabled = column.sortable === false || !this.options.sortable;\n      th.setAttribute(\n        'aria-sort',\n        sortMeta ? (sortMeta.direction === 'asc' ? 'ascending' : 'descending') : 'none'\n      );\n      th.appendChild(button);\n\n      if (this.options.columnResize) {\n        const resizeHandle = document.createElement('span');\n        resizeHandle.className = this.theme.classOf('resizeHandle', 'vt-resize-handle');\n        resizeHandle.dataset.key = column.key;\n        resizeHandle.tabIndex = 0;\n        resizeHandle.setAttribute('role', 'separator');\n        resizeHandle.setAttribute('aria-orientation', 'vertical');\n        th.appendChild(resizeHandle);\n      }\n\n      sortRow.appendChild(th);\n    });\n\n    if (this.options.rowActions.length) {\n      const actionTh = document.createElement('th');\n      actionTh.textContent = this.options.labels.actions;\n      actionTh.className = this.theme.classOf('actionHeader', 'vt-actions-header');\n      sortRow.appendChild(actionTh);\n    }\n\n    headRows.push(sortRow);\n\n    if (this.options.columnFilters) {\n      const filterRow = document.createElement('tr');\n      filterRow.className = this.theme.classOf('filterRow', 'vt-filter-row');\n      filterRow.setAttribute('role', 'row');\n\n      if (this.options.expandableRows) {\n        const expandFilterHeader = document.createElement('th');\n        expandFilterHeader.className = this.theme.classOf('filterHeaderCell', 'vt-filter-header-cell');\n        filterRow.appendChild(expandFilterHeader);\n      }\n\n      columns.forEach((column, index) => {\n        const th = document.createElement('th');\n        th.className = this.theme.classOf('filterHeaderCell', 'vt-filter-header-cell');\n        applyFixedColumn(th, index + (this.options.expandableRows ? 1 : 0));\n        if (column.filterable === false) {\n          filterRow.appendChild(th);\n          return;\n        }\n\n        const input = document.createElement('input');\n        input.className = this.theme.classOf('columnFilter', 'vt-column-filter');\n        input.placeholder = `${this.options.labels.filter} ${column.label}`;\n        input.value = columnFilters[column.key] || '';\n        input.dataset.key = column.key;\n        th.appendChild(input);\n        filterRow.appendChild(th);\n      });\n\n      if (this.options.rowActions.length) {\n        filterRow.appendChild(document.createElement('th'));\n      }\n\n      headRows.push(filterRow);\n    }\n\n    thead.innerHTML = '';\n    headRows.forEach((row) => {\n      thead.appendChild(row);\n    });\n\n    if (this.options.fixedHeader) {\n      appendClassNames(thead, this.theme.classOf('fixedHeader', 'vt-fixed-header'));\n    }\n  }\n}\n\n/**\n * Appends one or more class tokens to an element.\n *\n * @param {HTMLElement} element\n * @param {string} classNames\n * @returns {void}\n */\nfunction appendClassNames(element, classNames) {\n  classNames\n    .split(/\\s+/)\n    .filter(Boolean)\n    .forEach((name) => {\n      element.classList.add(name);\n    });\n}\n", "/**\n * Renders table body rows, expansion rows, and editable cell state.\n */\nexport class BodyRenderer {\n  /**\n   * Creates a body renderer instance.\n   *\n   * @param {{ options: Record<string, any>, hooks: Record<string, Function>, theme: import('../themes/theme-manager.js').ThemeManager }} config\n   */\n  constructor({ options, hooks, theme }) {\n    /** @type {Record<string, any>} */\n    this.options = options;\n    /** @type {Record<string, Function>} */\n    this.hooks = hooks;\n    /** @type {import('../themes/theme-manager.js').ThemeManager} */\n    this.theme = theme;\n  }\n\n  /**\n   * Renders visible table body content.\n   *\n   * @param {HTMLTableSectionElement} tbody\n   * @param {{ key: string, render?: (value: any, row: Record<string, any>) => string, editable?: boolean }[]} columns\n   * @param {Record<string, any>[]} rows\n   * @param {{ expandedRowIds: Set<string>, getRowId: (row: Record<string, any>, index: number) => string, expandRow: ((row: Record<string, any>) => string) | null, editableRows: boolean, editableColumns: Record<string, boolean>, columnWidths: Record<string, number>, virtualization: { enabled: boolean, start: number, end: number, rowHeight: number } }} meta\n   * @param {(cell: HTMLElement, visualIndex: number) => void} applyFixedColumn\n   * @returns {void}\n   */\n  render(tbody, columns, rows, meta, applyFixedColumn) {\n    tbody.innerHTML = '';\n\n    if (!rows.length) {\n      const tr = document.createElement('tr');\n      tr.setAttribute('role', 'row');\n      const td = document.createElement('td');\n      td.setAttribute('role', 'gridcell');\n      td.colSpan = columns.length + (this.options.expandableRows ? 1 : 0) + (this.options.rowActions.length ? 1 : 0);\n      td.className = this.theme.classOf('emptyCell', 'vt-empty');\n      td.textContent = this.options.labels.empty;\n      tr.appendChild(td);\n      tbody.appendChild(tr);\n      return;\n    }\n\n    const renderSlice = meta.virtualization.enabled\n      ? rows.slice(meta.virtualization.start, meta.virtualization.end)\n      : rows;\n\n    if (meta.virtualization.enabled && meta.virtualization.start > 0) {\n      const topSpacer = document.createElement('tr');\n      topSpacer.className = 'vt-virtual-top';\n      const topCell = document.createElement('td');\n      topCell.colSpan = columns.length + (this.options.expandableRows ? 1 : 0) + (this.options.rowActions.length ? 1 : 0);\n      topCell.style.height = `${meta.virtualization.start * meta.virtualization.rowHeight}px`;\n      topCell.style.padding = '0';\n      topCell.style.border = 'none';\n      topSpacer.appendChild(topCell);\n      tbody.appendChild(topSpacer);\n    }\n\n    renderSlice.forEach((row, localIndex) => {\n      const index = meta.virtualization.enabled ? meta.virtualization.start + localIndex : localIndex;\n      const rowId = meta.getRowId(row, index);\n      const tr = document.createElement('tr');\n      tr.className = this.theme.classOf('bodyRow', 'vt-row');\n      tr.dataset.rowId = rowId;\n      tr.setAttribute('role', 'row');\n\n      if (this.options.fixedTopRows && index < this.options.fixedTopRows) {\n        appendClassNames(tr, this.theme.classOf('fixedTopRow', 'vt-fixed-top-row'));\n      }\n\n      if (this.options.expandableRows) {\n        const expandTd = document.createElement('td');\n        expandTd.className = this.theme.classOf('expandCell', 'vt-expand-cell');\n        applyFixedColumn(expandTd, 0);\n\n        const expandButton = document.createElement('button');\n        expandButton.type = 'button';\n        expandButton.className = this.theme.classOf('expandTrigger', 'vt-expand-trigger');\n        expandButton.dataset.rowId = rowId;\n        expandButton.textContent = meta.expandedRowIds.has(rowId) ? '\u2212' : '+';\n        expandButton.setAttribute('aria-expanded', String(meta.expandedRowIds.has(rowId)));\n        expandTd.appendChild(expandButton);\n        tr.appendChild(expandTd);\n      }\n\n      columns.forEach((column, columnIndex) => {\n        const td = document.createElement('td');\n        td.className = this.theme.classOf('bodyCell', 'vt-cell');\n        td.setAttribute('role', 'gridcell');\n        td.dataset.key = column.key;\n        td.dataset.rowId = rowId;\n        applyFixedColumn(td, columnIndex + (this.options.expandableRows ? 1 : 0));\n\n        if (meta.columnWidths[column.key]) {\n          td.style.width = `${meta.columnWidths[column.key]}px`;\n        }\n\n        const raw = row[column.key];\n        td.innerHTML = column.render ? column.render(raw, row) : escapeHtml(String(raw ?? ''));\n\n        const isEditable = meta.editableRows && column.editable !== false && meta.editableColumns[column.key] !== false;\n        if (isEditable) {\n          appendClassNames(td, this.theme.classOf('editableCell', 'vt-cell-editable'));\n        }\n\n        tr.appendChild(td);\n      });\n\n      if (this.options.rowActions.length) {\n        const actionTd = document.createElement('td');\n        actionTd.className = this.theme.classOf('actionsCell', 'vt-actions-cell');\n        actionTd.setAttribute('role', 'gridcell');\n        this.options.rowActions.forEach((action) => {\n          const button = document.createElement('button');\n          button.type = 'button';\n          button.className = `${this.theme.classOf('actionButton', 'vt-action-btn')} ${action.className || ''}`.trim();\n          button.dataset.actionId = action.id;\n          button.dataset.rowId = rowId;\n          button.textContent = action.label;\n          actionTd.appendChild(button);\n        });\n        tr.appendChild(actionTd);\n      }\n\n      tbody.appendChild(tr);\n      this.hooks.afterRowRender?.({ row, element: tr });\n\n      if (this.options.expandableRows && meta.expandedRowIds.has(rowId) && meta.expandRow) {\n        const expanded = document.createElement('tr');\n        expanded.className = this.theme.classOf('expandRow', 'vt-expand-row');\n        const expandedCell = document.createElement('td');\n        expandedCell.colSpan = columns.length + 1 + (this.options.rowActions.length ? 1 : 0);\n        expandedCell.className = this.theme.classOf('expandContent', 'vt-expand-content');\n        expandedCell.innerHTML = meta.expandRow(row);\n        expanded.appendChild(expandedCell);\n        tbody.appendChild(expanded);\n      }\n    });\n\n    if (meta.virtualization.enabled && meta.virtualization.end < rows.length) {\n      const bottomSpacer = document.createElement('tr');\n      bottomSpacer.className = 'vt-virtual-bottom';\n      const bottomCell = document.createElement('td');\n      bottomCell.colSpan = columns.length + (this.options.expandableRows ? 1 : 0) + (this.options.rowActions.length ? 1 : 0);\n      bottomCell.style.height = `${(rows.length - meta.virtualization.end) * meta.virtualization.rowHeight}px`;\n      bottomCell.style.padding = '0';\n      bottomCell.style.border = 'none';\n      bottomSpacer.appendChild(bottomCell);\n      tbody.appendChild(bottomSpacer);\n    }\n  }\n}\n\n/**\n * Escapes HTML-sensitive characters.\n *\n * @param {string} value\n * @returns {string}\n */\nfunction escapeHtml(value) {\n  return value\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#039;');\n}\n\n/**\n * Appends one or more class tokens to an element.\n *\n * @param {HTMLElement} element\n * @param {string} classNames\n * @returns {void}\n */\nfunction appendClassNames(element, classNames) {\n  classNames\n    .split(/\\s+/)\n    .filter(Boolean)\n    .forEach((name) => {\n      element.classList.add(name);\n    });\n}\n", "/**\n * Renders footer pagination summary and control state.\n */\nexport class FooterRenderer {\n  /**\n   * Creates a footer renderer instance.\n   *\n   * @param {{ options: Record<string, any> }} config\n   */\n  constructor({ options }) {\n    /** @type {Record<string, any>} */\n    this.options = options;\n  }\n\n  /**\n   * Renders footer state.\n   *\n   * @param {{ info: HTMLElement, first: HTMLButtonElement, prev: HTMLButtonElement, next: HTMLButtonElement, last: HTMLButtonElement }} refs\n   * @param {{ page: number, totalPages: number, totalRows: number, loading?: boolean }} details\n   * @returns {void}\n   */\n  render(refs, { page, totalPages, totalRows, loading }) {\n    refs.info.textContent = loading\n      ? this.options.labels.loading\n      : this.options.labels.pageInfo({ page, totalPages, totalRows });\n    refs.first.disabled = Boolean(loading) || page <= 1;\n    refs.prev.disabled = Boolean(loading) || page <= 1;\n    refs.next.disabled = Boolean(loading) || page >= totalPages;\n    refs.last.disabled = Boolean(loading) || page >= totalPages;\n  }\n}\n", "/**\n * Resolves theme class names from semantic keys.\n */\nexport class ThemeManager {\n  /**\n   * Creates a theme manager instance.\n   *\n   * @param {Record<string, string>} classes\n   */\n  constructor(classes = {}) {\n    /** @type {Record<string, string>} */\n    this.classes = classes;\n  }\n\n  /**\n   * Replaces stored theme classes.\n   *\n   * @param {Record<string, string>} classes\n   * @returns {void}\n   */\n  setClasses(classes) {\n    this.classes = classes || {};\n  }\n\n  /**\n   * Returns composed class names for a semantic key.\n   *\n   * @param {string} key\n   * @param {string} base\n   * @returns {string}\n   */\n  classOf(key, base) {\n    const extra = this.classes?.[key];\n    return extra ? `${base} ${extra}` : base;\n  }\n}\n", "import { ShellRenderer } from './renderers/shell-renderer.js';\nimport { HeaderRenderer } from './renderers/header-renderer.js';\nimport { BodyRenderer } from './renderers/body-renderer.js';\nimport { FooterRenderer } from './renderers/footer-renderer.js';\nimport { ThemeManager } from './themes/theme-manager.js';\n\n/**\n * Coordinates specialized renderers for shell, header, body, and footer.\n */\nexport class Renderer {\n  /**\n   * Creates a renderer instance.\n   *\n   * @param {{ root: HTMLElement, options: Record<string, any>, hooks: Record<string, Function> }} config\n   */\n  constructor({ root, options, hooks }) {\n    /** @type {HTMLElement} */\n    this.root = root;\n    /** @type {Record<string, any>} */\n    this.options = options;\n    /** @type {Record<string, Function>} */\n    this.hooks = hooks;\n    /** @type {Record<string, HTMLElement>} */\n    this.refs = {};\n\n    /** @type {ThemeManager} */\n    this.theme = new ThemeManager(this.options.themeClasses);\n    /** @type {ShellRenderer} */\n    this.shellRenderer = new ShellRenderer({ root: this.root, options: this.options, theme: this.theme });\n    /** @type {HeaderRenderer} */\n    this.headerRenderer = new HeaderRenderer({ options: this.options, theme: this.theme });\n    /** @type {BodyRenderer} */\n    this.bodyRenderer = new BodyRenderer({ options: this.options, hooks: this.hooks, theme: this.theme });\n    /** @type {FooterRenderer} */\n    this.footerRenderer = new FooterRenderer({ options: this.options });\n  }\n\n  /**\n   * Updates renderer options.\n   *\n   * @param {Record<string, any>} options\n   * @returns {void}\n   */\n  setOptions(options) {\n    this.options = options;\n    this.theme.setClasses(this.options.themeClasses);\n    this.shellRenderer.options = this.options;\n    this.headerRenderer.options = this.options;\n    this.bodyRenderer.options = this.options;\n    this.footerRenderer.options = this.options;\n  }\n\n  /**\n   * Mounts the base table shell.\n   *\n   * @returns {void}\n   */\n  mount() {\n    this.refs = this.shellRenderer.mount();\n  }\n\n  /**\n   * Renders header content.\n   *\n   * @param {{ key: string, label: string, sortable?: boolean, filterable?: boolean }[]} columns\n   * @param {{ key: string, direction: 'asc'|'desc' }[]} sortState\n   * @param {Record<string, string>} columnFilters\n   * @param {Record<string, number>} columnWidths\n   * @returns {void}\n   */\n  renderHeader(columns, sortState, columnFilters, columnWidths) {\n    this.headerRenderer.render(\n      this.refs.thead,\n      columns,\n      sortState,\n      columnFilters,\n      (cell, visualIndex) => this.applyFixedColumn(cell, visualIndex, columns, columnWidths),\n      columnWidths\n    );\n  }\n\n  /**\n   * Renders body content.\n   *\n   * @param {{ key: string, render?: (value: any, row: Record<string, any>) => string, editable?: boolean }[]} columns\n   * @param {Record<string, any>[]} rows\n   * @param {{ expandedRowIds: Set<string>, getRowId: (row: Record<string, any>, index: number) => string, expandRow: ((row: Record<string, any>) => string) | null, editableRows: boolean, editableColumns: Record<string, boolean>, columnWidths: Record<string, number>, virtualization: { enabled: boolean, start: number, end: number, rowHeight: number } }} meta\n   * @returns {void}\n   */\n  renderBody(columns, rows, meta) {\n    this.bodyRenderer.render(\n      this.refs.tbody,\n      columns,\n      rows,\n      meta,\n      (cell, visualIndex) => this.applyFixedColumn(cell, visualIndex, columns, meta.columnWidths)\n    );\n  }\n\n  /**\n   * Renders footer content.\n   *\n   * @param {{ page: number, totalPages: number, totalRows: number, loading?: boolean }} details\n   * @returns {void}\n   */\n  renderFooter(details) {\n    this.footerRenderer.render(\n      {\n        info: this.refs.info,\n        first: this.refs.first,\n        prev: this.refs.prev,\n        next: this.refs.next,\n        last: this.refs.last\n      },\n      details\n    );\n  }\n\n  /**\n   * Applies sticky positioning for fixed columns.\n   *\n   * @param {HTMLElement} cell\n   * @param {number} visualIndex\n   * @param {{ key: string }[]} columns\n   * @param {Record<string, number>} columnWidths\n   * @returns {void}\n   */\n  applyFixedColumn(cell, visualIndex, columns, columnWidths) {\n    if (!this.options.fixedColumns || visualIndex >= this.options.fixedColumns) {\n      return;\n    }\n\n    let left = 0;\n    for (let i = 0; i < visualIndex; i += 1) {\n      const key = columns[i]?.key;\n      left += key && columnWidths[key] ? columnWidths[key] : 180;\n    }\n\n    cell.style.position = 'sticky';\n    cell.style.left = `${left}px`;\n    cell.style.zIndex = '2';\n    appendClassNames(cell, this.theme.classOf('fixedColumn', 'vt-fixed-column'));\n  }\n}\n\n/**\n * Appends one or more class tokens to an element.\n *\n * @param {HTMLElement} element\n * @param {string} classNames\n * @returns {void}\n */\nfunction appendClassNames(element, classNames) {\n  classNames\n    .split(/\\s+/)\n    .filter(Boolean)\n    .forEach((name) => {\n      element.classList.add(name);\n    });\n}\n", "/**\n * Executes filter/search/sort projections across worker shards.\n */\nexport class ProjectionWorkerPool {\n  /**\n   * Creates a worker pool instance.\n   *\n   * @param {{ size: number, timeoutMs?: number, retries?: number }} config\n   */\n  constructor({ size, timeoutMs, retries }) {\n    /** @type {number} */\n    this.size = Math.max(1, Number(size || 1));\n    /** @type {{ worker: Worker }[]} */\n    this.workers = [];\n    /** @type {Map<number, { resolve: (value: any) => void, reject: (reason: any) => void }>} */\n    this.pending = new Map();\n    /** @type {number} */\n    this.nextId = 1;\n    /** @type {number} */\n    this.timeoutMs = Math.max(50, Number(timeoutMs || 4000));\n    /** @type {number} */\n    this.retries = Math.max(0, Math.floor(Number(retries || 1)));\n    /** @type {Record<string, any>[]} */\n    this.rows = [];\n\n    for (let i = 0; i < this.size; i += 1) {\n      this.workers.push({ worker: this.createWorker() });\n    }\n  }\n\n  /**\n   * Terminates all worker instances.\n   *\n   * @returns {void}\n   */\n  destroy() {\n    for (const slot of this.workers) {\n      slot.worker.terminate();\n    }\n    this.workers = [];\n    this.pending.clear();\n  }\n\n  /**\n   * Distributes rows across workers.\n   *\n   * @param {Record<string, any>[]} rows\n   * @returns {Promise<void>}\n   */\n  setRows(rows) {\n    const data = Array.isArray(rows) ? rows : [];\n    this.rows = data;\n    const shardSize = Math.ceil((data.length || 1) / this.workers.length);\n\n    return Promise.all(\n      this.workers.map((slot, index) => {\n        const start = index * shardSize;\n        const end = Math.min(start + shardSize, data.length);\n        return this.runTask(slot.worker, {\n          type: 'setRows',\n          rows: data.slice(start, end),\n          offset: start\n        }).then(() => {});\n      })\n    ).then(() => {});\n  }\n\n  /**\n   * Computes filtered/sorted row indices using worker shards.\n   *\n   * @param {{ keys: string[], searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[] }} query\n   * @returns {Promise<number[]>}\n   */\n  project(query) {\n    return Promise.all(\n      this.workers.map((slot) =>\n        this.runTask(slot.worker, {\n          type: 'project',\n          keys: query.keys,\n          searchTerm: query.searchTerm,\n          columnFilters: query.columnFilters,\n          sorts: query.sorts\n        })\n      )\n    ).then((chunks) => this.mergeChunks(chunks, query.sorts));\n  }\n\n  /**\n   * Creates one worker with inline projection logic.\n   *\n   * @returns {Worker}\n   */\n  createWorker() {\n    const worker = new Worker(getWorkerUrl());\n    worker.onmessage = (event) => {\n      const payload = event.data || {};\n      const pending = this.pending.get(payload.id);\n      if (!pending) return;\n\n      this.pending.delete(payload.id);\n      if (payload.error) {\n        pending.reject(new Error(payload.error));\n        return;\n      }\n      pending.resolve(payload.result);\n    };\n    worker.onerror = () => {\n      this.pending.forEach(({ reject }) => reject(new Error('projection worker failed')));\n      this.pending.clear();\n    };\n    return worker;\n  }\n\n  /**\n   * Runs one task on a worker and resolves by task id.\n   *\n   * @param {Worker} worker\n   * @param {Record<string, any>} payload\n   * @returns {Promise<any>}\n   */\n  runTask(worker, payload) {\n    return this.runTaskAttempt(worker, payload, this.retries);\n  }\n\n  /**\n   * Runs one task with retry and timeout guards.\n   *\n   * @param {Worker} worker\n   * @param {Record<string, any>} payload\n   * @param {number} retriesLeft\n   * @returns {Promise<any>}\n   */\n  runTaskAttempt(worker, payload, retriesLeft) {\n    const id = this.nextId;\n    this.nextId += 1;\n    let timeoutHandle;\n\n    return new Promise((resolve, reject) => {\n      const onReject = (error) => {\n        clearTimeout(timeoutHandle);\n        if (retriesLeft > 0) {\n          this.runTaskAttempt(worker, payload, retriesLeft - 1).then(resolve).catch(reject);\n          return;\n        }\n        reject(error);\n      };\n\n      const onResolve = (result) => {\n        clearTimeout(timeoutHandle);\n        resolve(result);\n      };\n\n      this.pending.set(id, { resolve: onResolve, reject: onReject });\n      timeoutHandle = setTimeout(() => {\n        this.pending.delete(id);\n        onReject(new Error(`projection worker timeout after ${this.timeoutMs}ms`));\n      }, this.timeoutMs);\n      worker.postMessage({\n        ...payload,\n        id\n      });\n    });\n  }\n\n  /**\n   * Merges per-shard result chunks into one globally ordered index array.\n   *\n   * @param {number[][]} chunks\n   * @param {{ key: string, direction: 'asc'|'desc' }[]} sorts\n   * @returns {number[]}\n   */\n  mergeChunks(chunks, sorts) {\n    if (!Array.isArray(chunks) || !chunks.length) return [];\n    if (!Array.isArray(sorts) || !sorts.length) return chunks.flat();\n\n    const pointers = new Int32Array(chunks.length);\n    const output = [];\n\n    while (true) {\n      let bestChunk = -1;\n      let bestIndex = -1;\n\n      for (let i = 0; i < chunks.length; i += 1) {\n        const pointer = pointers[i];\n        const chunk = chunks[i];\n        if (pointer >= chunk.length) continue;\n\n        const currentIndex = chunk[pointer];\n        if (bestChunk === -1) {\n          bestChunk = i;\n          bestIndex = currentIndex;\n          continue;\n        }\n\n        const comparison = compareRowsBySorts(this.rows[currentIndex], this.rows[bestIndex], sorts);\n        if (comparison < 0 || (comparison === 0 && currentIndex < bestIndex)) {\n          bestChunk = i;\n          bestIndex = currentIndex;\n        }\n      }\n\n      if (bestChunk === -1) break;\n      output.push(bestIndex);\n      pointers[bestChunk] += 1;\n    }\n\n    return output;\n  }\n}\n\n/** @type {string | null} */\nlet cachedWorkerUrl = null;\n\n/**\n * Returns a blob URL for the projection worker implementation.\n *\n * @returns {string}\n */\nfunction getWorkerUrl() {\n  if (cachedWorkerUrl) return cachedWorkerUrl;\n\n  const source = `\n    const toText = (value) => String(value ?? '').toLowerCase();\n\n    let rows = [];\n    let offset = 0;\n\n    self.onmessage = (event) => {\n      const data = event.data || {};\n\n      try {\n        if (data.type === 'setRows') {\n          rows = Array.isArray(data.rows) ? data.rows : [];\n          offset = Number(data.offset || 0);\n          self.postMessage({ id: data.id, result: true });\n          return;\n        }\n\n        if (data.type === 'project') {\n          const keys = Array.isArray(data.keys) ? data.keys : [];\n          const searchTerm = toText(data.searchTerm || '');\n          const sorts = Array.isArray(data.sorts) ? data.sorts : [];\n          const filters = data.columnFilters && typeof data.columnFilters === 'object'\n            ? data.columnFilters\n            : {};\n          const filterEntries = Object.entries(filters);\n          const output = [];\n\n          for (let i = 0; i < rows.length; i += 1) {\n            const row = rows[i];\n            let matchesFilters = true;\n\n            for (const [key, term] of filterEntries) {\n              if (!toText(row && row[key]).includes(toText(term))) {\n                matchesFilters = false;\n                break;\n              }\n            }\n            if (!matchesFilters) continue;\n\n            if (!searchTerm) {\n              output.push(offset + i);\n              continue;\n            }\n\n            let matchesSearch = false;\n            for (const key of keys) {\n              if (toText(row && row[key]).includes(searchTerm)) {\n                matchesSearch = true;\n                break;\n              }\n            }\n            if (matchesSearch) output.push(offset + i);\n          }\n\n          if (sorts.length > 0) {\n            output.sort((leftIndex, rightIndex) => {\n              const leftRow = rows[leftIndex - offset];\n              const rightRow = rows[rightIndex - offset];\n              for (const sort of sorts) {\n                const leftRaw = leftRow ? leftRow[sort.key] : null;\n                const rightRaw = rightRow ? rightRow[sort.key] : null;\n                const leftNum = Number(leftRaw);\n                const rightNum = Number(rightRaw);\n                const leftFinite = Number.isFinite(leftNum);\n                const rightFinite = Number.isFinite(rightNum);\n\n                let cmp = 0;\n                if (leftFinite && rightFinite) {\n                  cmp = leftNum - rightNum;\n                } else {\n                  const leftText = toText(leftRaw);\n                  const rightText = toText(rightRaw);\n                  if (leftText < rightText) cmp = -1;\n                  else if (leftText > rightText) cmp = 1;\n                }\n\n                if (cmp !== 0) return sort.direction === 'desc' ? -cmp : cmp;\n              }\n              return leftIndex - rightIndex;\n            });\n          }\n\n          self.postMessage({ id: data.id, result: output });\n          return;\n        }\n\n        self.postMessage({ id: data.id, result: null });\n      } catch (error) {\n        self.postMessage({ id: data.id, error: error && error.message ? error.message : 'worker error' });\n      }\n    };\n  `;\n\n  cachedWorkerUrl = URL.createObjectURL(new Blob([source], { type: 'application/javascript' }));\n  return cachedWorkerUrl;\n}\n\n/**\n * Compares two rows by sort definitions.\n *\n * @param {Record<string, any>} leftRow\n * @param {Record<string, any>} rightRow\n * @param {{ key: string, direction: 'asc'|'desc' }[]} sorts\n * @returns {number}\n */\nfunction compareRowsBySorts(leftRow, rightRow, sorts) {\n  for (const sort of sorts) {\n    const leftRaw = leftRow?.[sort.key];\n    const rightRaw = rightRow?.[sort.key];\n    const leftNum = Number(leftRaw);\n    const rightNum = Number(rightRaw);\n    const leftFinite = Number.isFinite(leftNum);\n    const rightFinite = Number.isFinite(rightNum);\n\n    let comparison = 0;\n    if (leftFinite && rightFinite) {\n      comparison = leftNum - rightNum;\n    } else {\n      const leftText = String(leftRaw ?? '').toLowerCase();\n      const rightText = String(rightRaw ?? '').toLowerCase();\n      if (leftText < rightText) comparison = -1;\n      else if (leftText > rightText) comparison = 1;\n    }\n\n    if (comparison !== 0) {\n      return sort.direction === 'desc' ? -comparison : comparison;\n    }\n  }\n\n  return 0;\n}\n", "import { ProjectionWorkerPool } from './parallel/projection-worker-pool.js';\n\n/**\n * Stores and computes table state projections.\n */\nexport class StateStore {\n  /**\n   * Creates a state store.\n   *\n   * @param {{ rows: Record<string, any>[], pageSize: number, initialSort: { key: string, direction?: 'asc'|'desc' } | null, parallel?: { enabled?: boolean, threshold?: number, workers?: number|'auto', timeoutMs?: number, retries?: number } }} config\n   */\n  constructor({ rows, pageSize, initialSort, parallel }) {\n    /** @type {Record<string, any>[]} */\n    this.rows = rows;\n    /** @type {{ page: number, pageSize: number, searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[], columnOrder: string[], columnWidths: Record<string, number>, columnVisibility: Record<string, boolean> }} */\n    this.state = {\n      page: 1,\n      pageSize,\n      searchTerm: '',\n      columnFilters: {},\n      sorts: initialSort\n        ? [{ key: initialSort.key, direction: initialSort.direction || 'asc' }]\n        : [],\n      columnOrder: [],\n      columnWidths: {},\n      columnVisibility: {}\n    };\n\n    /** @type {number} */\n    this.rowsVersion = 0;\n    /** @type {number} */\n    this.revision = 0;\n    /** @type {{ rowsVersion: number, columnsKey: string, searchTerm: string, filtersKey: string, rows: Record<string, any>[] } | null} */\n    this.filterCache = null;\n    /** @type {{ revision: number, columnsKey: string, rows: Record<string, any>[] } | null} */\n    this.projectionCache = null;\n    /** @type {{ rowsVersion: number, columnsKey: string, rows: Record<string, any>[], rowIndex: WeakMap<Record<string, any>, number>, textByKey: Map<string, string[]>, numericByKey: Map<string, { values: Float64Array, flags: Uint8Array }>, hasAlphaByKey: Map<string, boolean> } | null} */\n    this.columnIndexCache = null;\n    const parallelWorkers = resolveParallelWorkers(parallel?.workers);\n    /** @type {{ enabled: boolean, threshold: number, workers: number, timeoutMs: number, retries: number }} */\n    this.parallel = {\n      enabled: parallel?.enabled !== false,\n      threshold: Math.max(1000, Number(parallel?.threshold ?? 20000)),\n      workers: parallelWorkers,\n      timeoutMs: Math.max(50, Number(parallel?.timeoutMs ?? 4000)),\n      retries: Math.max(0, Math.floor(Number(parallel?.retries ?? 1)))\n    };\n    /** @type {ProjectionWorkerPool | null} */\n    this.projectionWorkerPool = null;\n    /** @type {Promise<void>} */\n    this.projectionWorkerReady = Promise.resolve();\n\n    if (this.parallel.enabled && typeof Worker !== 'undefined') {\n      this.projectionWorkerPool = new ProjectionWorkerPool({\n        size: this.parallel.workers,\n        timeoutMs: this.parallel.timeoutMs,\n        retries: this.parallel.retries\n      });\n      this.projectionWorkerReady = this.projectionWorkerPool\n        .setRows(this.rows)\n        .catch(() => {\n          this.projectionWorkerPool?.destroy();\n          this.projectionWorkerPool = null;\n        });\n    }\n  }\n\n  /**\n   * Sets the full rows array.\n   *\n   * @param {Record<string, any>[]} rows\n   * @returns {void}\n   */\n  setRows(rows) {\n    this.rows = Array.isArray(rows) ? rows : [];\n    this.rowsVersion += 1;\n    this.invalidateFiltersAndProjection();\n    this.columnIndexCache = null;\n    this.syncWorkerRows();\n  }\n\n  /**\n   * Sets the global search term.\n   *\n   * @param {string} searchTerm\n   * @returns {void}\n   */\n  setSearchTerm(searchTerm) {\n    this.state.searchTerm = (searchTerm || '').toLowerCase().trim();\n    this.state.page = 1;\n    this.invalidateFiltersAndProjection();\n  }\n\n  /**\n   * Sets a per-column filter term.\n   *\n   * @param {string} key\n   * @param {string} value\n   * @returns {void}\n   */\n  setColumnFilter(key, value) {\n    const normalized = (value || '').toLowerCase().trim();\n    if (!normalized) {\n      delete this.state.columnFilters[key];\n    } else {\n      this.state.columnFilters[key] = normalized;\n    }\n    this.state.page = 1;\n    this.invalidateFiltersAndProjection();\n  }\n\n  /**\n   * Clears all active filters.\n   *\n   * @returns {void}\n   */\n  clearFilters() {\n    this.state.searchTerm = '';\n    this.state.columnFilters = {};\n    this.state.page = 1;\n    this.invalidateFiltersAndProjection();\n  }\n\n  /**\n   * Sets the active page index.\n   *\n   * @param {number} page\n   * @returns {void}\n   */\n  setPage(page) {\n    this.state.page = Math.max(1, page);\n  }\n\n  /**\n   * Sets the page size and resets pagination.\n   *\n   * @param {number} pageSize\n   * @returns {void}\n   */\n  setPageSize(pageSize) {\n    this.state.pageSize = pageSize;\n    this.state.page = 1;\n  }\n\n  /**\n   * Toggles column sort direction.\n   *\n   * @param {string} key\n   * @param {boolean} additive\n   * @param {number} maxSorts\n   * @returns {void}\n   */\n  toggleSort(key, additive, maxSorts) {\n    const existingIndex = this.state.sorts.findIndex((item) => item.key === key);\n\n    if (!additive) {\n      if (existingIndex === -1) {\n        this.state.sorts = [{ key, direction: 'asc' }];\n      } else {\n        const current = this.state.sorts[existingIndex];\n        this.state.sorts = [{ key, direction: current.direction === 'asc' ? 'desc' : 'asc' }];\n      }\n      this.invalidateProjection();\n      return;\n    }\n\n    if (existingIndex === -1) {\n      this.state.sorts.push({ key, direction: 'asc' });\n      if (this.state.sorts.length > maxSorts) {\n        this.state.sorts.shift();\n      }\n      this.invalidateProjection();\n      return;\n    }\n\n    const current = this.state.sorts[existingIndex];\n    this.state.sorts[existingIndex] = {\n      key,\n      direction: current.direction === 'asc' ? 'desc' : 'asc'\n    };\n    this.invalidateProjection();\n  }\n\n  /**\n   * Sets absolute sort state.\n   *\n   * @param {{ key: string, direction: 'asc'|'desc' }[]} sorts\n   * @returns {void}\n   */\n  setSorts(sorts) {\n    this.state.sorts = Array.isArray(sorts) ? sorts : [];\n    this.state.page = 1;\n    this.invalidateProjection();\n  }\n\n  /**\n   * Clears active sorts.\n   *\n   * @returns {void}\n   */\n  clearSorts() {\n    this.state.sorts = [];\n    this.state.page = 1;\n    this.invalidateProjection();\n  }\n\n  /**\n   * Sets ordered column keys.\n   *\n   * @param {string[]} order\n   * @returns {void}\n   */\n  setColumnOrder(order) {\n    this.state.columnOrder = Array.isArray(order) ? [...order] : [];\n  }\n\n  /**\n   * Sets one column width in pixels.\n   *\n   * @param {string} key\n   * @param {number} width\n   * @returns {void}\n   */\n  setColumnWidth(key, width) {\n    const normalized = Math.max(60, Math.round(width || 0));\n    this.state.columnWidths[key] = normalized;\n  }\n\n  /**\n   * Sets column visibility by key.\n   *\n   * @param {string} key\n   * @param {boolean} visible\n   * @returns {void}\n   */\n  setColumnVisibility(key, visible) {\n    this.state.columnVisibility[key] = Boolean(visible);\n  }\n\n  /**\n   * Applies a state payload.\n   *\n   * @param {Partial<{ page: number, pageSize: number, searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[], columnOrder: string[], columnWidths: Record<string, number>, columnVisibility: Record<string, boolean> }>} payload\n   * @returns {void}\n   */\n  setState(payload) {\n    if (!payload) return;\n    let affectsProjection = false;\n    let affectsFilters = false;\n    if (typeof payload.page === 'number') this.state.page = Math.max(1, payload.page);\n    if (typeof payload.pageSize === 'number') this.state.pageSize = payload.pageSize;\n    if (typeof payload.searchTerm === 'string') {\n      this.state.searchTerm = payload.searchTerm;\n      affectsProjection = true;\n      affectsFilters = true;\n    }\n    if (payload.columnFilters && typeof payload.columnFilters === 'object') {\n      this.state.columnFilters = { ...payload.columnFilters };\n      affectsProjection = true;\n      affectsFilters = true;\n    }\n    if (Array.isArray(payload.sorts)) {\n      this.state.sorts = [...payload.sorts];\n      affectsProjection = true;\n    }\n    if (Array.isArray(payload.columnOrder)) this.state.columnOrder = [...payload.columnOrder];\n    if (payload.columnWidths && typeof payload.columnWidths === 'object') {\n      this.state.columnWidths = { ...payload.columnWidths };\n    }\n    if (payload.columnVisibility && typeof payload.columnVisibility === 'object') {\n      this.state.columnVisibility = { ...payload.columnVisibility };\n    }\n    if (affectsFilters) {\n      this.invalidateFiltersAndProjection();\n    } else if (affectsProjection) {\n      this.invalidateProjection();\n    }\n  }\n\n  /**\n   * Returns serializable state.\n   *\n   * @returns {{ page: number, pageSize: number, searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[], columnOrder: string[], columnWidths: Record<string, number>, columnVisibility: Record<string, boolean> }}\n   */\n  getState() {\n    return {\n      page: this.state.page,\n      pageSize: this.state.pageSize,\n      searchTerm: this.state.searchTerm,\n      columnFilters: { ...this.state.columnFilters },\n      sorts: [...this.state.sorts],\n      columnOrder: [...this.state.columnOrder],\n      columnWidths: { ...this.state.columnWidths },\n      columnVisibility: { ...this.state.columnVisibility }\n    };\n  }\n\n  /**\n   * Returns ordered columns based on current state.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {{ key: string }[]}\n   */\n  getOrderedColumns(columns) {\n    if (!this.state.columnOrder.length) return columns;\n\n    const map = new Map(columns.map((column) => [column.key, column]));\n    const ordered = this.state.columnOrder.map((key) => map.get(key)).filter(Boolean);\n    const selected = new Set(ordered.map((column) => column.key));\n    const rest = columns.filter((column) => !selected.has(column.key));\n    return [...ordered, ...rest];\n  }\n\n  /**\n   * Returns visible columns based on visibility map.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {{ key: string }[]}\n   */\n  getVisibleColumns(columns) {\n    return columns.filter((column) => this.state.columnVisibility[column.key] !== false);\n  }\n\n  /**\n   * Returns query payload for server-side fetches.\n   *\n   * @returns {{ page: number, pageSize: number, searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[] }}\n   */\n  getQuery() {\n    return {\n      page: this.state.page,\n      pageSize: this.state.pageSize,\n      searchTerm: this.state.searchTerm,\n      columnFilters: { ...this.state.columnFilters },\n      sorts: [...this.state.sorts]\n    };\n  }\n\n  /**\n   * Returns rows visible for the current state.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {{ rows: Record<string, any>[], totalRows: number, totalPages: number }}\n   */\n  getVisibleRows(columns) {\n    const sorted = this.getProjectedRows(columns);\n    const { page, pageSize } = this.state;\n    const start = (page - 1) * pageSize;\n    return {\n      rows: sorted.slice(start, start + pageSize),\n      totalRows: sorted.length,\n      totalPages: Math.max(1, Math.ceil(sorted.length / pageSize))\n    };\n  }\n\n  /**\n   * Returns rows visible for the current state, using worker projection when enabled.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {Promise<{ rows: Record<string, any>[], totalRows: number, totalPages: number }>}\n   */\n  getVisibleRowsAsync(columns) {\n    return this.getProjectedRowsAsync(columns).then((sorted) => {\n      const { page, pageSize } = this.state;\n      const start = (page - 1) * pageSize;\n      return {\n        rows: sorted.slice(start, start + pageSize),\n        totalRows: sorted.length,\n        totalPages: Math.max(1, Math.ceil(sorted.length / pageSize))\n      };\n    });\n  }\n\n  /**\n   * Filters rows using column-level filters.\n   *\n   * @param {Record<string, any>[]} rows\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  applyColumnFilters(rows, columns) {\n    const columnSet = new Set(columns.map((item) => item.key));\n    const activeFilters = Object.entries(this.state.columnFilters).filter(([key]) => columnSet.has(key));\n    if (!activeFilters.length) return rows;\n\n    if (rows === this.rows) {\n      const index = this.getColumnIndex(columns);\n      const filterColumns = activeFilters.map(([key, term]) => ({\n        term,\n        text: this.getIndexedText(index, key)\n      }));\n      const output = [];\n\n      for (let i = 0; i < rows.length; i += 1) {\n        let matches = true;\n        for (const filterColumn of filterColumns) {\n          if (!filterColumn.text[i].includes(filterColumn.term)) {\n            matches = false;\n            break;\n          }\n        }\n        if (matches) output.push(rows[i]);\n      }\n      return output;\n    }\n\n    const output = [];\n    for (const row of rows) {\n      let matches = true;\n      for (const [key, term] of activeFilters) {\n        if (!String(row?.[key] ?? '').toLowerCase().includes(term)) {\n          matches = false;\n          break;\n        }\n      }\n      if (matches) output.push(row);\n    }\n    return output;\n  }\n\n  /**\n   * Filters rows using a case-insensitive contains match.\n   *\n   * @param {Record<string, any>[]} rows\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  applySearch(rows, columns) {\n    if (!this.state.searchTerm) return rows;\n\n    const keys = columns.map((column) => column.key);\n\n    if (rows === this.rows) {\n      const index = this.getColumnIndex(columns);\n      const searchKeys = this.getSearchableKeys(index, keys, this.state.searchTerm);\n      const searchColumns = searchKeys.map((key) => this.getIndexedText(index, key));\n      const output = [];\n\n      for (let i = 0; i < rows.length; i += 1) {\n        let matches = false;\n        for (const searchColumn of searchColumns) {\n          if (searchColumn[i].includes(this.state.searchTerm)) {\n            matches = true;\n            break;\n          }\n        }\n        if (matches) output.push(rows[i]);\n      }\n      return output;\n    }\n\n    const output = [];\n    for (const row of rows) {\n      let matches = false;\n      for (const key of keys) {\n        if (String(row?.[key] ?? '').toLowerCase().includes(this.state.searchTerm)) {\n          matches = true;\n          break;\n        }\n      }\n      if (matches) output.push(row);\n    }\n    return output;\n  }\n\n  /**\n   * Sorts rows by the active sort configuration.\n   *\n   * @param {Record<string, any>[]} rows\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  applySort(rows, columns) {\n    return this.applySortWithCache(rows, columns);\n  }\n\n  /**\n   * Invalidates cached row projections.\n   *\n   * @returns {void}\n   */\n  invalidateProjection() {\n    this.revision += 1;\n    this.projectionCache = null;\n  }\n\n  /**\n   * Invalidates cached filtered and projected rows.\n   *\n   * @returns {void}\n   */\n  invalidateFiltersAndProjection() {\n    this.filterCache = null;\n    this.invalidateProjection();\n  }\n\n  /**\n   * Syncs worker shards with current source rows.\n   *\n   * @returns {void}\n   */\n  syncWorkerRows() {\n    if (!this.projectionWorkerPool) return;\n\n    this.projectionWorkerReady = this.projectionWorkerPool.setRows(this.rows).catch(() => {\n      this.projectionWorkerPool?.destroy();\n      this.projectionWorkerPool = null;\n    });\n  }\n\n  /**\n   * Returns whether current query should run in worker shards.\n   *\n   * @returns {boolean}\n   */\n  canUseWorkerProjection() {\n    if (!this.projectionWorkerPool) return false;\n    if (this.rows.length < this.parallel.threshold) return false;\n    const hasFilters = Boolean(this.state.searchTerm) || Boolean(Object.keys(this.state.columnFilters).length);\n    const hasSorts = Boolean(this.state.sorts.length);\n    if (!hasFilters && !hasSorts) return false;\n    return true;\n  }\n\n  /**\n   * Disposes worker resources.\n   *\n   * @returns {void}\n   */\n  destroy() {\n    this.projectionWorkerPool?.destroy();\n    this.projectionWorkerPool = null;\n  }\n\n  /**\n   * Returns sorted+filtered projection for current query state.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  getProjectedRows(columns) {\n    const columnsKey = this.getColumnsKey(columns);\n    if (\n      this.projectionCache &&\n      this.projectionCache.revision === this.revision &&\n      this.projectionCache.columnsKey === columnsKey\n    ) {\n      return this.projectionCache.rows;\n    }\n\n    const filtered = this.getFilteredRows(columns, columnsKey);\n    const sorted = this.applySortWithCache(filtered, columns);\n    if (!this.state.searchTerm && !Object.keys(this.state.columnFilters).length && this.rows.length > 20000) {\n      const index = this.getColumnIndex(columns);\n      for (const column of columns) {\n        this.getIndexedText(index, column.key);\n        this.getIndexedNumeric(index, column.key);\n        this.hasAlphaValues(index, column.key);\n      }\n    }\n    this.projectionCache = {\n      revision: this.revision,\n      columnsKey,\n      rows: sorted\n    };\n    return sorted;\n  }\n\n  /**\n   * Returns sorted+filtered projection, optionally using worker projection.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {Promise<Record<string, any>[]>}\n   */\n  getProjectedRowsAsync(columns) {\n    const columnsKey = this.getColumnsKey(columns);\n    if (\n      this.projectionCache &&\n      this.projectionCache.revision === this.revision &&\n      this.projectionCache.columnsKey === columnsKey\n    ) {\n      return Promise.resolve(this.projectionCache.rows);\n    }\n\n    if (this.canUseWorkerProjection()) {\n      return this.getProjectedRowsFromWorkers(columns, columnsKey);\n    }\n\n    return this.getFilteredRowsWithWorkersAsync(columns, columnsKey).then((filtered) => {\n      const sorted = this.applySortWithCache(filtered, columns);\n      if (!this.state.searchTerm && !Object.keys(this.state.columnFilters).length && this.rows.length > 20000) {\n        const index = this.getColumnIndex(columns);\n        for (const column of columns) {\n          this.getIndexedText(index, column.key);\n          this.getIndexedNumeric(index, column.key);\n          this.hasAlphaValues(index, column.key);\n        }\n      }\n      this.projectionCache = {\n        revision: this.revision,\n        columnsKey,\n        rows: sorted\n      };\n      return sorted;\n    });\n  }\n\n  /**\n   * Returns projection rows computed by worker shards.\n   *\n   * @param {{ key: string }[]} columns\n   * @param {string} columnsKey\n   * @returns {Promise<Record<string, any>[]>}\n   */\n  getProjectedRowsFromWorkers(columns, columnsKey) {\n    const searchTerm = this.state.searchTerm;\n    const filtersKey = this.serializeActiveFilters(columns);\n\n    return this.projectionWorkerReady\n      .then(() =>\n        this.projectionWorkerPool.project({\n          keys: columns.map((column) => column.key),\n          searchTerm,\n          columnFilters: this.state.columnFilters,\n          sorts: this.state.sorts\n        })\n      )\n      .then((indices) => {\n        const rows = indices.map((index) => this.rows[index]).filter(Boolean);\n        this.filterCache = {\n          rowsVersion: this.rowsVersion,\n          columnsKey,\n          searchTerm,\n          filtersKey,\n          rows\n        };\n        this.projectionCache = {\n          revision: this.revision,\n          columnsKey,\n          rows\n        };\n        return rows;\n      })\n      .catch(() => {\n        this.projectionWorkerPool?.destroy();\n        this.projectionWorkerPool = null;\n        return Promise.resolve(this.getProjectedRows(columns));\n      });\n  }\n\n  /**\n   * Returns filtered rows for active filter/search state.\n   *\n   * @param {{ key: string }[]} columns\n   * @param {string} columnsKey\n   * @returns {Record<string, any>[]}\n   */\n  getFilteredRows(columns, columnsKey) {\n    const searchTerm = this.state.searchTerm;\n    const filtersKey = this.serializeActiveFilters(columns);\n    if (\n      this.filterCache &&\n      this.filterCache.rowsVersion === this.rowsVersion &&\n      this.filterCache.columnsKey === columnsKey &&\n      this.filterCache.searchTerm === searchTerm &&\n      this.filterCache.filtersKey === filtersKey\n    ) {\n      return this.filterCache.rows;\n    }\n\n    const rows = this.applyFiltersAndSearch(this.rows, columns);\n    this.filterCache = {\n      rowsVersion: this.rowsVersion,\n      columnsKey,\n      searchTerm,\n      filtersKey,\n      rows\n    };\n    return rows;\n  }\n\n  /**\n   * Returns filtered rows, using worker shards when configured.\n   *\n   * @param {{ key: string }[]} columns\n   * @param {string} columnsKey\n   * @returns {Promise<Record<string, any>[]>}\n   */\n  getFilteredRowsWithWorkersAsync(columns, columnsKey) {\n    const searchTerm = this.state.searchTerm;\n    const filtersKey = this.serializeActiveFilters(columns);\n    if (\n      this.filterCache &&\n      this.filterCache.rowsVersion === this.rowsVersion &&\n      this.filterCache.columnsKey === columnsKey &&\n      this.filterCache.searchTerm === searchTerm &&\n      this.filterCache.filtersKey === filtersKey\n    ) {\n      return Promise.resolve(this.filterCache.rows);\n    }\n\n    if (!this.canUseWorkerProjection()) {\n      const rows = this.applyFiltersAndSearch(this.rows, columns);\n      this.filterCache = {\n        rowsVersion: this.rowsVersion,\n        columnsKey,\n        searchTerm,\n        filtersKey,\n        rows\n      };\n      return Promise.resolve(rows);\n    }\n\n    return this.projectionWorkerReady\n      .then(() =>\n        this.projectionWorkerPool.project({\n          keys: columns.map((column) => column.key),\n          searchTerm,\n          columnFilters: this.state.columnFilters,\n          sorts: []\n        })\n      )\n      .then((indices) => {\n        const rows = indices.map((index) => this.rows[index]).filter(Boolean);\n        this.filterCache = {\n          rowsVersion: this.rowsVersion,\n          columnsKey,\n          searchTerm,\n          filtersKey,\n          rows\n        };\n        return rows;\n      })\n      .catch(() => {\n        this.projectionWorkerPool?.destroy();\n        this.projectionWorkerPool = null;\n\n        const rows = this.applyFiltersAndSearch(this.rows, columns);\n        this.filterCache = {\n          rowsVersion: this.rowsVersion,\n          columnsKey,\n          searchTerm,\n          filtersKey,\n          rows\n        };\n        return rows;\n      });\n  }\n\n  /**\n   * Applies column filters and global search in one pass.\n   *\n   * @param {Record<string, any>[]} rows\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  applyFiltersAndSearch(rows, columns) {\n    const keys = columns.map((column) => column.key);\n    const columnSet = new Set(keys);\n    const activeFilters = Object.entries(this.state.columnFilters).filter(([key]) => columnSet.has(key));\n    const searchTerm = this.state.searchTerm;\n\n    if (!activeFilters.length && !searchTerm) return rows;\n\n    if (rows === this.rows) {\n      const index = this.getColumnIndex(columns);\n      const filterColumns = activeFilters.map(([key, term]) => ({\n        term,\n        text: this.getIndexedText(index, key)\n      }));\n      const searchColumns = searchTerm\n        ? this.getSearchableKeys(index, keys, searchTerm).map((key) => this.getIndexedText(index, key))\n        : null;\n      const output = [];\n\n      for (let i = 0; i < rows.length; i += 1) {\n        let matchesFilters = true;\n        for (const filterColumn of filterColumns) {\n          if (!filterColumn.text[i].includes(filterColumn.term)) {\n            matchesFilters = false;\n            break;\n          }\n        }\n        if (!matchesFilters) continue;\n\n        if (!searchColumns) {\n          output.push(rows[i]);\n          continue;\n        }\n\n        let matchesSearch = false;\n        for (const searchColumn of searchColumns) {\n          if (searchColumn[i].includes(searchTerm)) {\n            matchesSearch = true;\n            break;\n          }\n        }\n        if (matchesSearch) output.push(rows[i]);\n      }\n      return output;\n    }\n\n    const output = [];\n    for (const row of rows) {\n      let matchesFilters = true;\n      for (const [key, term] of activeFilters) {\n        if (!String(row?.[key] ?? '').toLowerCase().includes(term)) {\n          matchesFilters = false;\n          break;\n        }\n      }\n      if (!matchesFilters) continue;\n\n      if (!searchTerm) {\n        output.push(row);\n        continue;\n      }\n\n      let matchesSearch = false;\n      for (const key of keys) {\n        if (String(row?.[key] ?? '').toLowerCase().includes(searchTerm)) {\n          matchesSearch = true;\n          break;\n        }\n      }\n      if (matchesSearch) output.push(row);\n    }\n    return output;\n  }\n\n  /**\n   * Applies sort rules using pre-normalized arrays and stable merge sort.\n   *\n   * @param {Record<string, any>[]} rows\n   * @param {{ key: string }[]} columns\n   * @returns {Record<string, any>[]}\n   */\n  applySortWithCache(rows, columns) {\n    if (!this.state.sorts.length) return rows;\n\n    const columnSet = new Set(columns.map((item) => item.key));\n    const sorts = this.state.sorts.filter((item) => columnSet.has(item.key));\n    if (!sorts.length) return rows;\n\n    const rowCount = rows.length;\n    const order = Array.from({ length: rowCount }).map((_, index) => index);\n    const index = this.getColumnIndex(columns);\n    const sourceIndexes = new Int32Array(rowCount);\n    let allIndexed = true;\n    for (let i = 0; i < rowCount; i += 1) {\n      const sourceIndex = index.rowIndex.get(rows[i]);\n      if (sourceIndex === undefined) {\n        allIndexed = false;\n        break;\n      }\n      sourceIndexes[i] = sourceIndex;\n    }\n\n    const descriptors = sorts.map((sort) => {\n      const text = new Array(rowCount);\n      const num = new Float64Array(rowCount);\n      const isNum = new Uint8Array(rowCount);\n      const indexedText = allIndexed ? this.getIndexedText(index, sort.key) : null;\n      const indexedNumeric = allIndexed ? this.getIndexedNumeric(index, sort.key) : null;\n\n      for (let i = 0; i < rowCount; i += 1) {\n        if (indexedText && indexedNumeric) {\n          const sourceIndex = sourceIndexes[i];\n          text[i] = indexedText[sourceIndex];\n          isNum[i] = indexedNumeric.flags[sourceIndex];\n          num[i] = indexedNumeric.values[sourceIndex];\n          continue;\n        }\n\n        const raw = rows[i]?.[sort.key];\n        const parsed = Number(raw);\n        text[i] = String(raw ?? '').toLowerCase();\n        if (Number.isFinite(parsed)) {\n          isNum[i] = 1;\n          num[i] = parsed;\n        }\n      }\n\n      return {\n        direction: sort.direction,\n        multiplier: sort.direction === 'desc' ? -1 : 1,\n        text,\n        num,\n        isNum\n      };\n    });\n\n    const comparator =\n      descriptors.length === 1\n        ? (leftIndex, rightIndex) => {\n            const descriptor = descriptors[0];\n            const bothNumeric = descriptor.isNum[leftIndex] && descriptor.isNum[rightIndex];\n            if (bothNumeric) {\n              const diff = descriptor.num[leftIndex] - descriptor.num[rightIndex];\n              if (diff !== 0) return diff * descriptor.multiplier;\n            } else {\n              const leftText = descriptor.text[leftIndex];\n              const rightText = descriptor.text[rightIndex];\n              if (leftText < rightText) return -1 * descriptor.multiplier;\n              if (leftText > rightText) return 1 * descriptor.multiplier;\n            }\n            return leftIndex - rightIndex;\n          }\n        : (leftIndex, rightIndex) => {\n            for (const descriptor of descriptors) {\n              const bothNumeric = descriptor.isNum[leftIndex] && descriptor.isNum[rightIndex];\n              if (bothNumeric) {\n                const diff = descriptor.num[leftIndex] - descriptor.num[rightIndex];\n                if (diff !== 0) return diff * descriptor.multiplier;\n                continue;\n              }\n              const leftText = descriptor.text[leftIndex];\n              const rightText = descriptor.text[rightIndex];\n              if (leftText < rightText) return -1 * descriptor.multiplier;\n              if (leftText > rightText) return 1 * descriptor.multiplier;\n            }\n            return leftIndex - rightIndex;\n          };\n\n    if (rowCount < 5000) {\n      mergeSort(order, comparator);\n    } else {\n      order.sort(comparator);\n    }\n\n    const output = new Array(rowCount);\n    for (let i = 0; i < rowCount; i += 1) {\n      output[i] = rows[order[i]];\n    }\n    return output;\n  }\n\n  /**\n   * Returns canonical key string for a column set.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {string}\n   */\n  getColumnsKey(columns) {\n    return columns.map((column) => column.key).join('|');\n  }\n\n  /**\n   * Serializes active filters for cache keying.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {string}\n   */\n  serializeActiveFilters(columns) {\n    const columnSet = new Set(columns.map((item) => item.key));\n    const active = Object.entries(this.state.columnFilters)\n      .filter(([key]) => columnSet.has(key))\n      .sort(([leftKey], [rightKey]) => compareText(leftKey, rightKey));\n    if (!active.length) return '';\n    return active.map(([key, value]) => `${key}:${value}`).join('|');\n  }\n\n  /**\n   * Returns normalized text index for current rows and columns.\n   *\n   * @param {{ key: string }[]} columns\n   * @returns {{ rowsVersion: number, columnsKey: string, rows: Record<string, any>[], rowIndex: WeakMap<Record<string, any>, number>, textByKey: Map<string, string[]>, numericByKey: Map<string, { values: Float64Array, flags: Uint8Array }>, hasAlphaByKey: Map<string, boolean> }}\n   */\n  getColumnIndex(columns) {\n    const columnsKey = this.getColumnsKey(columns);\n    if (\n      this.columnIndexCache &&\n      this.columnIndexCache.rowsVersion === this.rowsVersion &&\n      this.columnIndexCache.columnsKey === columnsKey &&\n      this.columnIndexCache.rows === this.rows\n    ) {\n      return this.columnIndexCache;\n    }\n\n    const rowIndex = new WeakMap();\n    for (let i = 0; i < this.rows.length; i += 1) {\n      rowIndex.set(this.rows[i], i);\n    }\n\n    this.columnIndexCache = {\n      rowsVersion: this.rowsVersion,\n      columnsKey,\n      rows: this.rows,\n      textByKey: new Map(),\n      rowIndex,\n      numericByKey: new Map(),\n      hasAlphaByKey: new Map()\n    };\n    return this.columnIndexCache;\n  }\n\n  /**\n   * Returns normalized text values for one indexed column.\n   *\n   * @param {{ rows: Record<string, any>[], textByKey: Map<string, string[]> }} index\n   * @param {string} key\n   * @returns {string[]}\n   */\n  getIndexedText(index, key) {\n    const cached = index.textByKey.get(key);\n    if (cached) return cached;\n\n    const values = new Array(index.rows.length);\n    for (let i = 0; i < index.rows.length; i += 1) {\n      values[i] = String(index.rows[i]?.[key] ?? '').toLowerCase();\n    }\n    index.textByKey.set(key, values);\n    return values;\n  }\n\n  /**\n   * Returns normalized numeric values and finite flags for one indexed column.\n   *\n   * @param {{ rows: Record<string, any>[], numericByKey: Map<string, { values: Float64Array, flags: Uint8Array }> }} index\n   * @param {string} key\n   * @returns {{ values: Float64Array, flags: Uint8Array }}\n   */\n  getIndexedNumeric(index, key) {\n    const cached = index.numericByKey.get(key);\n    if (cached) return cached;\n\n    const values = new Float64Array(index.rows.length);\n    const flags = new Uint8Array(index.rows.length);\n    for (let i = 0; i < index.rows.length; i += 1) {\n      const parsed = Number(index.rows[i]?.[key]);\n      if (Number.isFinite(parsed)) {\n        values[i] = parsed;\n        flags[i] = 1;\n      }\n    }\n\n    const next = { values, flags };\n    index.numericByKey.set(key, next);\n    return next;\n  }\n\n  /**\n   * Returns search keys optimized for the current term.\n   *\n   * @param {{ hasAlphaByKey: Map<string, boolean> }} index\n   * @param {string[]} keys\n   * @param {string} term\n   * @returns {string[]}\n   */\n  getSearchableKeys(index, keys, term) {\n    if (!HAS_ALPHA_RE.test(term)) return keys;\n\n    const filtered = keys.filter((key) => this.hasAlphaValues(index, key));\n    return filtered.length ? filtered : keys;\n  }\n\n  /**\n   * Returns whether a column can contain alphabetic characters.\n   *\n   * @param {{ hasAlphaByKey: Map<string, boolean> }} index\n   * @param {string} key\n   * @returns {boolean}\n   */\n  hasAlphaValues(index, key) {\n    const cached = index.hasAlphaByKey.get(key);\n    if (cached !== undefined) return cached;\n\n    const values = this.getIndexedText(index, key);\n    let hasAlpha = false;\n    for (let i = 0; i < values.length; i += 1) {\n      if (HAS_ALPHA_RE.test(values[i])) {\n        hasAlpha = true;\n        break;\n      }\n    }\n\n    index.hasAlphaByKey.set(key, hasAlpha);\n    return hasAlpha;\n  }\n\n}\n\n/** @type {RegExp} */\nconst HAS_ALPHA_RE = /[a-z]/;\n\n/**\n * Compares two lowercase text values.\n *\n * @param {string} left\n * @param {string} right\n * @returns {number}\n */\nfunction compareText(left, right) {\n  if (left < right) return -1;\n  if (left > right) return 1;\n  return 0;\n}\n\n/**\n * Performs stable merge sort on index arrays using a shared scratch buffer.\n *\n * @param {number[]} items\n * @param {(left: number, right: number) => number} compare\n * @returns {void}\n */\nfunction mergeSort(items, compare) {\n  const size = items.length;\n  if (size < 2) return;\n\n  const buffer = new Array(size);\n  let width = 1;\n\n  while (width < size) {\n    for (let start = 0; start < size; start += width * 2) {\n      const middle = Math.min(start + width, size);\n      const end = Math.min(start + width * 2, size);\n      let left = start;\n      let right = middle;\n      let write = start;\n\n      while (left < middle && right < end) {\n        if (compare(items[left], items[right]) <= 0) {\n          buffer[write] = items[left];\n          left += 1;\n        } else {\n          buffer[write] = items[right];\n          right += 1;\n        }\n        write += 1;\n      }\n\n      while (left < middle) {\n        buffer[write] = items[left];\n        left += 1;\n        write += 1;\n      }\n      while (right < end) {\n        buffer[write] = items[right];\n        right += 1;\n        write += 1;\n      }\n    }\n\n    for (let i = 0; i < size; i += 1) {\n      items[i] = buffer[i];\n    }\n    width *= 2;\n  }\n}\n\n/**\n * Resolves configured parallel worker count.\n *\n * @param {number | string | undefined} input\n * @returns {number}\n */\nfunction resolveParallelWorkers(input) {\n  if (typeof input === 'number' && Number.isFinite(input)) {\n    return Math.max(1, Math.floor(input));\n  }\n\n  if (input === 'auto' || input == null) {\n    const cores =\n      typeof navigator !== 'undefined' && Number.isFinite(navigator.hardwareConcurrency)\n        ? navigator.hardwareConcurrency\n        : 4;\n    return Math.max(2, Math.min(8, Math.floor(cores) - 1));\n  }\n\n  const numeric = Number(input);\n  if (Number.isFinite(numeric)) {\n    return Math.max(1, Math.floor(numeric));\n  }\n  return 4;\n}\n", "/**\n * Merges two plain objects recursively.\n *\n * @param {Record<string, any>} base\n * @param {Record<string, any>} extra\n * @returns {Record<string, any>}\n */\nexport function deepMerge(base, extra) {\n  const output = { ...base };\n\n  for (const key of Object.keys(extra || {})) {\n    const baseValue = output[key];\n    const extraValue = extra[key];\n\n    if (isObject(baseValue) && isObject(extraValue)) {\n      output[key] = deepMerge(baseValue, extraValue);\n    } else {\n      output[key] = extraValue;\n    }\n  }\n\n  return output;\n}\n\n/**\n * Checks whether a value is a non-array object.\n *\n * @param {unknown} value\n * @returns {boolean}\n */\nfunction isObject(value) {\n  return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n", "/**\n * Provides a minimal publish-subscribe event bus.\n */\nexport class EventEmitter {\n  /**\n   * Creates a new event emitter instance.\n   */\n  constructor() {\n    /** @type {Map<string, Function[]>} */\n    this.listeners = new Map();\n  }\n\n  /**\n   * Registers an event callback.\n   *\n   * @param {string} event\n   * @param {(payload: any) => void} callback\n   * @returns {() => void}\n   */\n  on(event, callback) {\n    const list = this.listeners.get(event) || [];\n    list.push(callback);\n    this.listeners.set(event, list);\n    return () => this.off(event, callback);\n  }\n\n  /**\n   * Removes an event callback.\n   *\n   * @param {string} event\n   * @param {(payload: any) => void} callback\n   * @returns {void}\n   */\n  off(event, callback) {\n    const list = this.listeners.get(event);\n    if (!list) return;\n    this.listeners.set(\n      event,\n      list.filter((item) => item !== callback)\n    );\n  }\n\n  /**\n   * Emits an event payload to registered listeners.\n   *\n   * @param {string} event\n   * @param {any} payload\n   * @returns {void}\n   */\n  emit(event, payload) {\n    const list = this.listeners.get(event);\n    if (!list) return;\n    for (const callback of list) callback(payload);\n  }\n}\n", "/**\n * Resolves client-side table view projections.\n */\nexport class ClientDataSource {\n  /**\n   * Creates a client data source instance.\n   *\n   * @param {{ store: import('../state-store.js').StateStore }} config\n   */\n  constructor({ store }) {\n    /** @type {import('../state-store.js').StateStore} */\n    this.store = store;\n  }\n\n  /**\n   * Resolves table view data.\n   *\n   * @param {{ columns: { key: string }[] }} context\n   * @returns {Promise<{ rows: Record<string, any>[], totalRows: number, totalPages: number }>}\n   */\n  getView({ columns }) {\n    if (\n      typeof this.store.getVisibleRowsAsync === 'function' &&\n      typeof this.store.canUseWorkerProjection === 'function' &&\n      this.store.canUseWorkerProjection()\n    ) {\n      return this.store.getVisibleRowsAsync(columns);\n    }\n    return Promise.resolve(this.store.getVisibleRows(columns));\n  }\n}\n", "/**\n * Resolves server-side table view projections.\n */\nexport class ServerDataSource {\n  /**\n   * Creates a server data source instance.\n   *\n   * @param {{ store: import('../state-store.js').StateStore, fetchData: Function | null, onLoadingChange: (loading: boolean) => void }} config\n   */\n  constructor({ store, fetchData, onLoadingChange }) {\n    /** @type {import('../state-store.js').StateStore} */\n    this.store = store;\n    /** @type {Function | null} */\n    this.fetchData = fetchData;\n    /** @type {(loading: boolean) => void} */\n    this.onLoadingChange = onLoadingChange;\n  }\n\n  /**\n   * Resolves table view data.\n   *\n   * @returns {Promise<{ rows: Record<string, any>[], totalRows: number, totalPages: number }>}\n   */\n  getView() {\n    if (typeof this.fetchData !== 'function') {\n      return Promise.reject(\n        new Error('VanillaTable serverSide mode requires options.fetchData(query).')\n      );\n    }\n\n    this.onLoadingChange(true);\n\n    const query = this.store.getQuery();\n    return Promise.resolve(this.fetchData(query))\n      .then((response) => {\n        const rows = Array.isArray(response?.rows) ? response.rows : [];\n        const totalRows = Number(response?.totalRows || rows.length);\n        this.store.setRows(rows);\n\n        return {\n          rows,\n          totalRows,\n          totalPages: Math.max(1, Math.ceil(totalRows / this.store.state.pageSize))\n        };\n      })\n      .finally(() => {\n        this.onLoadingChange(false);\n      });\n  }\n}\n", "import { ClientDataSource } from './client-data-source.js';\nimport { ServerDataSource } from './server-data-source.js';\n\n/**\n * Creates a data source strategy for current options.\n *\n * @param {{ options: Record<string, any>, store: import('../state-store.js').StateStore, onLoadingChange: (loading: boolean) => void }} config\n * @returns {ClientDataSource | ServerDataSource}\n */\nexport function createDataSource({ options, store, onLoadingChange }) {\n  if (options.serverSide) {\n    return new ServerDataSource({\n      store,\n      fetchData: options.fetchData,\n      onLoadingChange\n    });\n  }\n\n  return new ClientDataSource({ store });\n}\n", "/**\n * Synchronizes table state with URL and local storage.\n */\nexport class StateSync {\n  /**\n   * Creates state sync instance.\n   *\n   * @param {{ persistence: { enabled: boolean, storageKey: string | null }, urlSync: { enabled: boolean, param: string }, tableId: string }} config\n   */\n  constructor({ persistence, urlSync, tableId }) {\n    /** @type {{ enabled: boolean, storageKey: string | null }} */\n    this.persistence = persistence;\n    /** @type {{ enabled: boolean, param: string }} */\n    this.urlSync = urlSync;\n    /** @type {string} */\n    this.tableId = tableId;\n  }\n\n  /**\n   * Loads stored or URL state payload.\n   *\n   * @returns {Record<string, any>}\n   */\n  load() {\n    const fromUrl = this.loadFromUrl();\n    const fromStorage = this.loadFromStorage();\n    return {\n      ...fromStorage,\n      ...fromUrl\n    };\n  }\n\n  /**\n   * Persists state to configured sinks.\n   *\n   * @param {Record<string, any>} state\n   * @returns {void}\n   */\n  save(state) {\n    if (this.persistence.enabled) {\n      this.saveToStorage(state);\n    }\n\n    if (this.urlSync.enabled) {\n      this.saveToUrl(state);\n    }\n  }\n\n  /**\n   * Loads state from local storage.\n   *\n   * @returns {Record<string, any>}\n   */\n  loadFromStorage() {\n    if (!this.persistence.enabled || typeof window === 'undefined') return {};\n    const key = this.getStorageKey();\n\n    try {\n      const raw = window.localStorage.getItem(key);\n      if (!raw) return {};\n      const parsed = JSON.parse(raw);\n      return parsed && typeof parsed === 'object' ? parsed : {};\n    } catch {\n      return {};\n    }\n  }\n\n  /**\n   * Saves state to local storage.\n   *\n   * @param {Record<string, any>} state\n   * @returns {void}\n   */\n  saveToStorage(state) {\n    if (typeof window === 'undefined') return;\n\n    try {\n      window.localStorage.setItem(this.getStorageKey(), JSON.stringify(state));\n    } catch {\n      // Ignores storage write failures.\n    }\n  }\n\n  /**\n   * Loads state payload from URL param.\n   *\n   * @returns {Record<string, any>}\n   */\n  loadFromUrl() {\n    if (!this.urlSync.enabled || typeof window === 'undefined') return {};\n\n    try {\n      const params = new URLSearchParams(window.location.search);\n      const encoded = params.get(this.urlSync.param || 'vt');\n      if (!encoded) return {};\n      const json = decodeURIComponent(encoded);\n      const parsed = JSON.parse(json);\n      return parsed && typeof parsed === 'object' ? parsed : {};\n    } catch {\n      return {};\n    }\n  }\n\n  /**\n   * Saves state payload to URL param.\n   *\n   * @param {Record<string, any>} state\n   * @returns {void}\n   */\n  saveToUrl(state) {\n    if (typeof window === 'undefined') return;\n\n    try {\n      const params = new URLSearchParams(window.location.search);\n      params.set(this.urlSync.param || 'vt', encodeURIComponent(JSON.stringify(state)));\n      const next = `${window.location.pathname}?${params.toString()}${window.location.hash}`;\n      window.history.replaceState({}, '', next);\n    } catch {\n      // Ignores URL sync failures.\n    }\n  }\n\n  /**\n   * Returns storage key.\n   *\n   * @returns {string}\n   */\n  getStorageKey() {\n    return this.persistence.storageKey || `vanilla-tables:${this.tableId}`;\n  }\n}\n", "import { defaultOptions } from './default-options.js';\nimport { Renderer } from './renderer.js';\nimport { StateStore } from './state-store.js';\nimport { deepMerge } from '../utils/deep-merge.js';\nimport { EventEmitter } from '../utils/event-emitter.js';\nimport { createDataSource } from './data-sources/create-data-source.js';\nimport { StateSync } from './sync/state-sync.js';\n\n/**\n * Coordinates state, rendering, and plugin extensions.\n */\nexport class VanillaTable {\n  /**\n   * Creates a table instance.\n   *\n   * @param {HTMLElement} element\n   * @param {Record<string, any>[]} rows\n   * @param {Record<string, any>} [options]\n   */\n  constructor(element, rows, options = {}) {\n    if (!(element instanceof HTMLElement)) {\n      throw new Error('VanillaTable requires a valid HTMLElement as first argument.');\n    }\n\n    /** @type {HTMLElement} */\n    this.root = element;\n    /** @type {Record<string, any>[]} */\n    this.rows = Array.isArray(rows) ? rows : [];\n    /** @type {Record<string, any>} */\n    this.options = deepMerge(defaultOptions, options);\n    this.options.i18n = {\n      ...defaultOptions.i18n,\n      ...(this.options.i18n || {})\n    };\n    this.options.labels = {\n      ...this.options.labels,\n      search: this.options.i18n.search || this.options.labels.search,\n      filter: this.options.i18n.filter || this.options.labels.filter,\n      rows: this.options.i18n.rows || this.options.labels.rows,\n      actions: this.options.i18n.actions || this.options.labels.actions,\n      loading: this.options.i18n.loading || this.options.labels.loading,\n      empty: this.options.i18n.empty || this.options.labels.empty,\n      first: this.options.i18n.first || this.options.labels.first,\n      prev: this.options.i18n.prev || this.options.labels.prev,\n      next: this.options.i18n.next || this.options.labels.next,\n      last: this.options.i18n.last || this.options.labels.last,\n      pageInfo:\n        typeof this.options.i18n.pageInfo === 'string'\n          ? ({ page, totalPages, totalRows }) =>\n              this.options.i18n.pageInfo\n                .replace('{page}', String(page))\n                .replace('{totalPages}', String(totalPages))\n                .replace('{totalRows}', String(totalRows))\n          : this.options.labels.pageInfo\n    };\n\n    if (!this.options.columns.length) {\n      this.options.columns = inferColumns(this.rows);\n    }\n\n    /** @type {EventEmitter} */\n    this.events = new EventEmitter();\n    /** @type {Record<string, Function>} */\n    this.hooks = {};\n    /** @type {StateStore} */\n    this.store = new StateStore({\n      rows: this.rows,\n      pageSize: this.options.pageSize,\n      initialSort: this.options.initialSort,\n      parallel: this.options.parallel\n    });\n\n    const initialOrder = this.options.columns.map((column) => column.key);\n    this.store.setColumnOrder(initialOrder);\n\n    /** @type {Renderer} */\n    this.renderer = new Renderer({ root: element, options: this.options, hooks: this.hooks });\n    /** @type {ReturnType<typeof createDataSource>} */\n    this.dataSource = createDataSource({\n      options: this.options,\n      store: this.store,\n      onLoadingChange: (loading) => this.handleLoadingChange(loading)\n    });\n\n    /** @type {StateSync} */\n    this.stateSync = new StateSync({\n      persistence: this.options.persistence,\n      urlSync: this.options.urlSync,\n      tableId: this.getTableId()\n    });\n\n    /** @type {Set<string>} */\n    this.expandedRowIds = new Set();\n    /** @type {number | null} */\n    this.searchTimer = null;\n    /** @type {boolean} */\n    this.loading = false;\n    /** @type {Record<string, any>} */\n    this.lastView = { rows: [], totalRows: 0, totalPages: 1 };\n    /** @type {number | null} */\n    this.lastAnimationFrame = null;\n    /** @type {{ enabled: boolean, start: number, end: number, rowHeight: number }} */\n    this.virtualization = {\n      enabled: Boolean(this.options.virtualScroll.enabled),\n      start: 0,\n      end: this.options.pageSize,\n      rowHeight: this.options.virtualScroll.rowHeight\n    };\n\n    this.applySyncedState();\n  }\n\n  /**\n   * Initializes DOM and listeners.\n   *\n   * @returns {VanillaTable}\n   */\n  init() {\n    this.renderer.mount();\n    this.bindEvents();\n    void this.refresh();\n    this.emitEvent('init', { instance: this });\n    return this;\n  }\n\n  /**\n   * Re-renders current state to the DOM.\n   *\n   * @returns {Promise<void>}\n   */\n  refresh() {\n    let columns = this.store.getVisibleColumns(this.store.getOrderedColumns(this.options.columns));\n\n    return this.dataSource\n      .getView({ columns })\n      .then((view) => {\n        if (!columns.length && view.rows.length) {\n          this.options.columns = inferColumns(view.rows);\n          this.store.setColumnOrder(this.options.columns.map((column) => column.key));\n          columns = this.store.getVisibleColumns(this.store.getOrderedColumns(this.options.columns));\n        }\n\n        if (this.store.state.page > view.totalPages) {\n          this.store.setPage(view.totalPages);\n          return this.refresh();\n        }\n\n        this.lastView = view;\n        this.virtualization = this.computeVirtualWindow(view.rows.length);\n\n        this.renderer.renderHeader(\n          columns,\n          this.store.state.sorts,\n          this.store.state.columnFilters,\n          this.store.state.columnWidths\n        );\n        this.renderer.renderBody(columns, view.rows, {\n          expandedRowIds: this.expandedRowIds,\n          getRowId: (row, index) => this.getRowId(row, index),\n          expandRow: this.options.expandRow,\n          editableRows: this.options.editableRows,\n          editableColumns: this.options.editableColumns,\n          columnWidths: this.store.state.columnWidths,\n          virtualization: this.virtualization\n        });\n        this.renderer.renderFooter({\n          page: this.store.state.page,\n          totalPages: view.totalPages,\n          totalRows: view.totalRows,\n          loading: this.loading\n        });\n        this.renderer.refs.table?.setAttribute('aria-rowcount', String(view.totalRows));\n\n        this.persistState();\n        this.emitEvent('change', { state: this.getState(), view });\n        this.emitEvent('state:change', this.getState());\n      })\n      .catch((error) => {\n        this.emitEvent('error', { error });\n      });\n  }\n\n  /**\n   * Handles data loading state transitions.\n   *\n   * @param {boolean} loading\n   * @returns {void}\n   */\n  handleLoadingChange(loading) {\n    this.loading = loading;\n    this.renderer.renderFooter({\n      page: this.store.state.page,\n      totalPages: 1,\n      totalRows: 0,\n      loading\n    });\n    this.emitEvent('loading:change', { loading });\n  }\n\n  /**\n   * Attaches DOM event handlers.\n   *\n   * @returns {void}\n   */\n  bindEvents() {\n    this.bindSearchEvents();\n    this.bindSortEvents();\n    this.bindFilterEvents();\n    this.bindPaginationEvents();\n    this.bindExpandEvents();\n    this.bindEditEvents();\n    this.bindActionEvents();\n    this.bindColumnResizeEvents();\n    this.bindColumnReorderEvents();\n    this.bindVirtualScrollEvents();\n    this.bindKeyboardA11yEvents();\n  }\n\n  /**\n   * Attaches search input handlers.\n   *\n   * @returns {void}\n   */\n  bindSearchEvents() {\n    this.renderer.refs.search?.addEventListener('input', (event) => {\n      if (this.searchTimer) clearTimeout(this.searchTimer);\n\n      const applySearch = () => {\n        this.store.setSearchTerm(event.target.value);\n        this.emitEvent('search:change', { term: this.store.state.searchTerm });\n        void this.refresh();\n      };\n\n      if (this.options.debounceMs <= 0) {\n        applySearch();\n        return;\n      }\n\n      this.searchTimer = setTimeout(applySearch, this.options.debounceMs);\n    });\n  }\n\n  /**\n   * Attaches sort handlers.\n   *\n   * @returns {void}\n   */\n  bindSortEvents() {\n    this.renderer.refs.thead?.addEventListener('click', (event) => {\n      const button = event.target.closest('.vt-sort-trigger');\n      if (!button || button.disabled) return;\n      this.store.toggleSort(\n        button.dataset.key,\n        this.options.multiSort && event.shiftKey,\n        this.options.maxSorts\n      );\n      this.emitEvent('sort:change', { sorts: [...this.store.state.sorts] });\n      void this.refresh();\n    });\n  }\n\n  /**\n   * Attaches filter handlers.\n   *\n   * @returns {void}\n   */\n  bindFilterEvents() {\n    this.renderer.refs.thead?.addEventListener('input', (event) => {\n      const input = event.target.closest('.vt-column-filter');\n      if (!input) return;\n      this.store.setColumnFilter(input.dataset.key, input.value);\n      this.emitEvent('filter:change', {\n        key: input.dataset.key,\n        value: this.store.state.columnFilters[input.dataset.key] || ''\n      });\n      void this.refresh();\n    });\n  }\n\n  /**\n   * Attaches pagination handlers.\n   *\n   * @returns {void}\n   */\n  bindPaginationEvents() {\n    this.renderer.refs.pageSize?.addEventListener('change', (event) => {\n      this.store.setPageSize(Number(event.target.value));\n      this.emitEvent('pagesize:change', { pageSize: this.store.state.pageSize });\n      void this.refresh();\n    });\n\n    this.renderer.refs.prev?.addEventListener('click', () => {\n      this.store.setPage(this.store.state.page - 1);\n      this.emitEvent('page:change', { page: this.store.state.page });\n      void this.refresh();\n    });\n\n    this.renderer.refs.next?.addEventListener('click', () => {\n      this.store.setPage(this.store.state.page + 1);\n      this.emitEvent('page:change', { page: this.store.state.page });\n      void this.refresh();\n    });\n\n    this.renderer.refs.first?.addEventListener('click', () => {\n      this.store.setPage(1);\n      this.emitEvent('page:change', { page: this.store.state.page });\n      void this.refresh();\n    });\n\n    this.renderer.refs.last?.addEventListener('click', () => {\n      this.store.setPage(this.lastView.totalPages || 1);\n      this.emitEvent('page:change', { page: this.store.state.page });\n      void this.refresh();\n    });\n  }\n\n  /**\n   * Attaches row expansion handlers.\n   *\n   * @returns {void}\n   */\n  bindExpandEvents() {\n    this.renderer.refs.tbody?.addEventListener('click', (event) => {\n      const trigger = event.target.closest('.vt-expand-trigger');\n      if (!trigger) return;\n      const rowId = trigger.dataset.rowId;\n      this.toggleRow(rowId);\n    });\n  }\n\n  /**\n   * Attaches inline edit handlers.\n   *\n   * @returns {void}\n   */\n  bindEditEvents() {\n    this.renderer.refs.tbody?.addEventListener('dblclick', (event) => {\n      if (!this.options.editableRows) return;\n\n      const cell = event.target.closest('.vt-cell-editable');\n      if (!cell || cell.querySelector('input')) return;\n\n      const rowId = cell.dataset.rowId;\n      const key = cell.dataset.key;\n      const row = this.findRowById(rowId);\n      if (!row) return;\n\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.value = String(row[key] ?? '');\n      input.className = 'vt-inline-input';\n      cell.innerHTML = '';\n      cell.appendChild(input);\n      input.focus();\n\n      const submit = () => {\n        row[key] = input.value;\n        this.emitEvent('edit', { rowId, row, key, value: input.value });\n        this.emitEvent('row:edit', { rowId, row, key, value: input.value });\n        void this.refresh();\n      };\n\n      input.addEventListener('blur', submit, { once: true });\n      input.addEventListener('keydown', (keyboardEvent) => {\n        if (keyboardEvent.key === 'Enter') {\n          input.blur();\n        }\n      });\n    });\n  }\n\n  /**\n   * Attaches row action handlers.\n   *\n   * @returns {void}\n   */\n  bindActionEvents() {\n    this.renderer.refs.tbody?.addEventListener('click', (event) => {\n      const actionButton = event.target.closest('.vt-action-btn');\n      if (!actionButton) return;\n\n      const rowId = actionButton.dataset.rowId;\n      const actionId = actionButton.dataset.actionId;\n      const row = this.findRowById(rowId);\n      const action = this.options.rowActions.find((item) => item.id === actionId);\n      if (!action || !row) return;\n\n      Promise.resolve(action.onClick ? action.onClick({ row, rowId, actionId, table: this, event }) : null)\n        .finally(() => {\n          this.emitEvent('row:action', { row, rowId, actionId });\n        });\n    });\n  }\n\n  /**\n   * Attaches column resize handlers.\n   *\n   * @returns {void}\n   */\n  bindColumnResizeEvents() {\n    if (!this.options.columnResize) return;\n\n    this.renderer.refs.thead?.addEventListener('mousedown', (event) => {\n      const handle = event.target.closest('.vt-resize-handle');\n      if (!handle) return;\n\n      event.preventDefault();\n\n      const key = handle.dataset.key;\n      const startX = event.clientX;\n      const startWidth =\n        this.store.state.columnWidths[key] ||\n        this.renderer.refs.thead.querySelector(`th[data-key=\"${key}\"]`)?.getBoundingClientRect().width ||\n        180;\n\n      const onMove = (moveEvent) => {\n        const nextWidth = startWidth + (moveEvent.clientX - startX);\n        this.store.setColumnWidth(key, nextWidth);\n        this.emitEvent('column:resize', { key, width: this.store.state.columnWidths[key] });\n        void this.refresh();\n      };\n\n      const onUp = () => {\n        window.removeEventListener('mousemove', onMove);\n        window.removeEventListener('mouseup', onUp);\n        this.persistState();\n      };\n\n      window.addEventListener('mousemove', onMove);\n      window.addEventListener('mouseup', onUp);\n    });\n  }\n\n  /**\n   * Attaches column reorder handlers.\n   *\n   * @returns {void}\n   */\n  bindColumnReorderEvents() {\n    if (!this.options.columnReorder) return;\n\n    let draggingKey = null;\n\n    this.renderer.refs.thead?.addEventListener('dragstart', (event) => {\n      const th = event.target.closest('th[data-key]');\n      if (!th) return;\n      draggingKey = th.dataset.key;\n      event.dataTransfer.effectAllowed = 'move';\n    });\n\n    this.renderer.refs.thead?.addEventListener('dragover', (event) => {\n      if (!draggingKey) return;\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'move';\n    });\n\n    this.renderer.refs.thead?.addEventListener('drop', (event) => {\n      if (!draggingKey) return;\n      event.preventDefault();\n\n      const targetTh = event.target.closest('th[data-key]');\n      if (!targetTh) return;\n\n      const targetKey = targetTh.dataset.key;\n      if (!targetKey || targetKey === draggingKey) return;\n\n      const current = this.store.getOrderedColumns(this.options.columns).map((column) => column.key);\n      const next = current.filter((key) => key !== draggingKey);\n      const targetIndex = next.indexOf(targetKey);\n      next.splice(targetIndex, 0, draggingKey);\n\n      this.store.setColumnOrder(next);\n      this.emitEvent('column:reorder', { order: next });\n      void this.refresh();\n      draggingKey = null;\n    });\n\n    this.renderer.refs.thead?.addEventListener('dragend', () => {\n      draggingKey = null;\n    });\n  }\n\n  /**\n   * Attaches virtual scroll handlers.\n   *\n   * @returns {void}\n   */\n  bindVirtualScrollEvents() {\n    if (!this.options.virtualScroll.enabled) return;\n\n    this.renderer.refs.tableWrap?.addEventListener('scroll', () => {\n      if (this.lastAnimationFrame) {\n        cancelAnimationFrame(this.lastAnimationFrame);\n      }\n      this.lastAnimationFrame = requestAnimationFrame(() => {\n        void this.refresh();\n      });\n    });\n  }\n\n  /**\n   * Attaches keyboard accessibility handlers.\n   *\n   * @returns {void}\n   */\n  bindKeyboardA11yEvents() {\n    this.renderer.refs.thead?.addEventListener('keydown', (event) => {\n      const resizeHandle = event.target.closest('.vt-resize-handle');\n      if (resizeHandle && (event.key === 'ArrowLeft' || event.key === 'ArrowRight')) {\n        event.preventDefault();\n        const key = resizeHandle.dataset.key;\n        const current = this.store.state.columnWidths[key] || 180;\n        const delta = event.key === 'ArrowLeft' ? -16 : 16;\n        this.setColumnWidth(key, current + delta);\n        return;\n      }\n\n      const th = event.target.closest('th[data-key]');\n      if (!th || !this.options.columnReorder) return;\n\n      if (event.altKey && (event.key === 'ArrowLeft' || event.key === 'ArrowRight')) {\n        event.preventDefault();\n        const currentOrder = this.store.getOrderedColumns(this.options.columns).map((column) => column.key);\n        const key = th.dataset.key;\n        const index = currentOrder.indexOf(key);\n        if (index < 0) return;\n\n        const targetIndex =\n          event.key === 'ArrowLeft'\n            ? Math.max(0, index - 1)\n            : Math.min(currentOrder.length - 1, index + 1);\n        if (targetIndex === index) return;\n\n        const next = [...currentOrder];\n        next.splice(index, 1);\n        next.splice(targetIndex, 0, key);\n        this.reorderColumns(next);\n      }\n    });\n  }\n\n  /**\n   * Sets table data and refreshes.\n   *\n   * @param {Record<string, any>[]} rows\n   * @returns {Promise<void>}\n   */\n  setData(rows) {\n    this.rows = Array.isArray(rows) ? rows : [];\n    this.store.setRows(this.rows);\n    this.store.setPage(1);\n    this.emitEvent('data:set', { count: this.rows.length });\n    return this.refresh();\n  }\n\n  /**\n   * Adds one row.\n   *\n   * @param {Record<string, any>} row\n   * @returns {Promise<void>}\n   */\n  addRow(row) {\n    this.store.setRows([...this.store.rows, row]);\n    this.emitEvent('data:add', { row });\n    return this.refresh();\n  }\n\n  /**\n   * Removes one row by identifier.\n   *\n   * @param {string} rowId\n   * @returns {Promise<void>}\n   */\n  removeRowById(rowId) {\n    this.store.setRows(\n      this.store.rows.filter((row, index) => this.getRowId(row, index) !== String(rowId))\n    );\n    this.emitEvent('data:remove', { rowId });\n    return this.refresh();\n  }\n\n  /**\n   * Sets global search term.\n   *\n   * @param {string} term\n   * @returns {Promise<void>}\n   */\n  search(term) {\n    this.store.setSearchTerm(term);\n    this.emitEvent('search:change', { term: this.store.state.searchTerm });\n    return this.refresh();\n  }\n\n  /**\n   * Sets one column filter.\n   *\n   * @param {string} key\n   * @param {string} value\n   * @returns {Promise<void>}\n   */\n  filterBy(key, value) {\n    this.store.setColumnFilter(key, value);\n    this.emitEvent('filter:change', { key, value: this.store.state.columnFilters[key] || '' });\n    return this.refresh();\n  }\n\n  /**\n   * Clears all filters.\n   *\n   * @returns {Promise<void>}\n   */\n  clearFilters() {\n    this.store.clearFilters();\n    this.emitEvent('filter:clear', {});\n    return this.refresh();\n  }\n\n  /**\n   * Sets one sort rule.\n   *\n   * @param {string} key\n   * @param {'asc'|'desc'} [direction]\n   * @param {boolean} [additive]\n   * @returns {Promise<void>}\n   */\n  sortBy(key, direction = 'asc', additive = false) {\n    if (!additive) {\n      this.store.setSorts([{ key, direction }]);\n    } else {\n      const next = [...this.store.state.sorts.filter((item) => item.key !== key), { key, direction }];\n      this.store.setSorts(next.slice(-this.options.maxSorts));\n    }\n    this.emitEvent('sort:change', { sorts: [...this.store.state.sorts] });\n    return this.refresh();\n  }\n\n  /**\n   * Clears sort state.\n   *\n   * @returns {Promise<void>}\n   */\n  clearSort() {\n    this.store.clearSorts();\n    this.emitEvent('sort:clear', {});\n    return this.refresh();\n  }\n\n  /**\n   * Goes to one page.\n   *\n   * @param {number} page\n   * @returns {Promise<void>}\n   */\n  goToPage(page) {\n    this.store.setPage(page);\n    this.emitEvent('page:change', { page: this.store.state.page });\n    return this.refresh();\n  }\n\n  /**\n   * Sets page size.\n   *\n   * @param {number} pageSize\n   * @returns {Promise<void>}\n   */\n  setPageSize(pageSize) {\n    this.store.setPageSize(pageSize);\n    this.emitEvent('pagesize:change', { pageSize: this.store.state.pageSize });\n    return this.refresh();\n  }\n\n  /**\n   * Expands one row.\n   *\n   * @param {string} rowId\n   * @returns {Promise<void>}\n   */\n  expandRow(rowId) {\n    this.expandedRowIds.add(String(rowId));\n    this.emitEvent('row:expand', { rowId: String(rowId) });\n    return this.refresh();\n  }\n\n  /**\n   * Collapses one row.\n   *\n   * @param {string} rowId\n   * @returns {Promise<void>}\n   */\n  collapseRow(rowId) {\n    this.expandedRowIds.delete(String(rowId));\n    this.emitEvent('row:collapse', { rowId: String(rowId) });\n    return this.refresh();\n  }\n\n  /**\n   * Toggles one row expansion state.\n   *\n   * @param {string} rowId\n   * @returns {Promise<void>}\n   */\n  toggleRow(rowId) {\n    const normalized = String(rowId);\n    if (this.expandedRowIds.has(normalized)) {\n      return this.collapseRow(normalized);\n    }\n    return this.expandRow(normalized);\n  }\n\n  /**\n   * Expands all current rows.\n   *\n   * @returns {Promise<void>}\n   */\n  expandAllRows() {\n    this.store.rows.forEach((row, index) => {\n      this.expandedRowIds.add(this.getRowId(row, index));\n    });\n    this.emitEvent('row:expandAll', {});\n    return this.refresh();\n  }\n\n  /**\n   * Collapses all rows.\n   *\n   * @returns {Promise<void>}\n   */\n  collapseAllRows() {\n    this.expandedRowIds.clear();\n    this.emitEvent('row:collapseAll', {});\n    return this.refresh();\n  }\n\n  /**\n   * Updates one cell value.\n   *\n   * @param {string} rowId\n   * @param {string} key\n   * @param {any} value\n   * @returns {Promise<void>}\n   */\n  updateCell(rowId, key, value) {\n    const row = this.findRowById(String(rowId));\n    if (!row) return Promise.resolve();\n    row[key] = value;\n    this.emitEvent('edit', { rowId: String(rowId), row, key, value });\n    this.emitEvent('row:edit', { rowId: String(rowId), row, key, value });\n    return this.refresh();\n  }\n\n  /**\n   * Sets editable mode for one column.\n   *\n   * @param {string} key\n   * @param {boolean} editable\n   * @returns {Promise<void>}\n   */\n  setColumnEditable(key, editable) {\n    this.options.columns = this.options.columns.map((column) =>\n      column.key === key ? { ...column, editable } : column\n    );\n    this.options.editableColumns[key] = editable;\n    this.emitEvent('column:editable', { key, editable });\n    return this.refresh();\n  }\n\n  /**\n   * Sets one column width.\n   *\n   * @param {string} key\n   * @param {number} width\n   * @returns {Promise<void>}\n   */\n  setColumnWidth(key, width) {\n    this.store.setColumnWidth(key, width);\n    this.emitEvent('column:resize', { key, width: this.store.state.columnWidths[key] });\n    return this.refresh();\n  }\n\n  /**\n   * Reorders columns by key array.\n   *\n   * @param {string[]} order\n   * @returns {Promise<void>}\n   */\n  reorderColumns(order) {\n    this.store.setColumnOrder(order);\n    this.emitEvent('column:reorder', { order: [...order] });\n    return this.refresh();\n  }\n\n  /**\n   * Sets visibility for one column.\n   *\n   * @param {string} key\n   * @param {boolean} visible\n   * @returns {Promise<void>}\n   */\n  setColumnVisibility(key, visible) {\n    this.store.setColumnVisibility(key, visible);\n    this.emitEvent('column:visibility', { key, visible: Boolean(visible) });\n    return this.refresh();\n  }\n\n  /**\n   * Toggles visibility for one column.\n   *\n   * @param {string} key\n   * @returns {Promise<void>}\n   */\n  toggleColumnVisibility(key) {\n    const next = this.store.state.columnVisibility[key] === false;\n    return this.setColumnVisibility(key, next);\n  }\n\n  /**\n   * Applies theme classes and re-renders.\n   *\n   * @param {Record<string, string>} classes\n   * @returns {Promise<VanillaTable>}\n   */\n  setThemeClasses(classes) {\n    this.options.themeClasses = {\n      ...this.options.themeClasses,\n      ...(classes || {})\n    };\n    this.renderer.setOptions(this.options);\n    this.renderer.mount();\n    this.bindEvents();\n    return this.refresh().then(() => this);\n  }\n\n  /**\n   * Returns current serializable state.\n   *\n   * @returns {Record<string, any>}\n   */\n  getState() {\n    return {\n      ...this.store.getState(),\n      expandedRowIds: [...this.expandedRowIds]\n    };\n  }\n\n  /**\n   * Applies one state payload.\n   *\n   * @param {Record<string, any>} payload\n   * @returns {Promise<void>}\n   */\n  setState(payload) {\n    this.store.setState(payload);\n    if (Array.isArray(payload?.expandedRowIds)) {\n      this.expandedRowIds = new Set(payload.expandedRowIds.map((value) => String(value)));\n    }\n    return this.refresh();\n  }\n\n  /**\n   * Returns latest view payload.\n   *\n   * @returns {{ rows: Record<string, any>[], totalRows: number, totalPages: number }}\n   */\n  getView() {\n    return this.lastView;\n  }\n\n  /**\n   * Returns all current source rows.\n   *\n   * @returns {Record<string, any>[]}\n   */\n  getRows() {\n    return this.store.rows;\n  }\n\n  /**\n   * Subscribes to lifecycle events.\n   *\n   * @param {string} event\n   * @param {(payload: any) => void} callback\n   * @returns {() => void}\n   */\n  on(event, callback) {\n    return this.events.on(event, callback);\n  }\n\n  /**\n   * Applies a plugin function to the instance.\n   *\n   * @param {(table: VanillaTable) => void} plugin\n   * @returns {VanillaTable}\n   */\n  use(plugin) {\n    plugin(this);\n    return this;\n  }\n\n  /**\n   * Registers a render lifecycle hook.\n   *\n   * @param {string} name\n   * @param {(context: any) => void} callback\n   * @returns {VanillaTable}\n   */\n  registerHook(name, callback) {\n    this.hooks[name] = callback;\n    return this;\n  }\n\n  /**\n   * Clears rendered markup and emits destroy event.\n   *\n   * @returns {void}\n   */\n  destroy() {\n    if (this.searchTimer) {\n      clearTimeout(this.searchTimer);\n      this.searchTimer = null;\n    }\n    if (this.lastAnimationFrame) {\n      cancelAnimationFrame(this.lastAnimationFrame);\n      this.lastAnimationFrame = null;\n    }\n    this.store.destroy();\n    this.root.innerHTML = '';\n    this.emitEvent('destroy', {});\n  }\n\n  /**\n   * Resolves a row identifier.\n   *\n   * @param {Record<string, any>} row\n   * @param {number} index\n   * @returns {string}\n   */\n  getRowId(row, index) {\n    const value = row[this.options.rowIdKey];\n    return String(value ?? `${index}`);\n  }\n\n  /**\n   * Finds a row by string identifier.\n   *\n   * @param {string} rowId\n   * @returns {Record<string, any> | undefined}\n   */\n  findRowById(rowId) {\n    return this.store.rows.find((row, index) => this.getRowId(row, index) === rowId);\n  }\n\n  /**\n   * Emits one event payload.\n   *\n   * @param {string} event\n   * @param {any} payload\n   * @returns {void}\n   */\n  emitEvent(event, payload) {\n    this.events.emit(event, payload);\n    if (this.options.events.debug && typeof console !== 'undefined') {\n      console.debug(`[vanilla-tables] ${event}`, payload);\n    }\n  }\n\n  /**\n   * Persists current state via configured sync backends.\n   *\n   * @returns {void}\n   */\n  persistState() {\n    this.stateSync.save(this.getState());\n  }\n\n  /**\n   * Applies synced state from storage and URL.\n   *\n   * @returns {void}\n   */\n  applySyncedState() {\n    const synced = this.stateSync.load();\n    this.store.setState(synced);\n    if (Array.isArray(synced?.expandedRowIds)) {\n      this.expandedRowIds = new Set(synced.expandedRowIds.map((value) => String(value)));\n    }\n  }\n\n  /**\n   * Computes virtual scroll window.\n   *\n   * @param {number} totalRows\n   * @returns {{ enabled: boolean, start: number, end: number, rowHeight: number }}\n   */\n  computeVirtualWindow(totalRows) {\n    if (!this.options.virtualScroll.enabled || !this.renderer.refs.tableWrap) {\n      return {\n        enabled: false,\n        start: 0,\n        end: totalRows,\n        rowHeight: this.options.virtualScroll.rowHeight\n      };\n    }\n\n    const wrap = this.renderer.refs.tableWrap;\n    const rowHeight = this.options.virtualScroll.rowHeight;\n    const overscan = this.options.virtualScroll.overscan;\n    const visibleCount = Math.ceil((wrap.clientHeight || this.options.virtualScroll.height) / rowHeight);\n    const start = Math.max(0, Math.floor(wrap.scrollTop / rowHeight) - overscan);\n    const end = Math.min(totalRows, start + visibleCount + overscan * 2);\n\n    return {\n      enabled: true,\n      start,\n      end,\n      rowHeight\n    };\n  }\n\n  /**\n   * Resolves a stable table id used for state sync.\n   *\n   * @returns {string}\n   */\n  getTableId() {\n    if (this.root.id) return this.root.id;\n    const token = Math.random().toString(36).slice(2, 10);\n    return `vt-${token}`;\n  }\n}\n\n/**\n * Infers column metadata from the first data row.\n *\n * @param {Record<string, any>[]} rows\n * @returns {{ key: string, label: string, editable: boolean }[]}\n */\nfunction inferColumns(rows) {\n  if (!rows.length) return [];\n\n  return Object.keys(rows[0]).map((key) => ({\n    key,\n    label: key.charAt(0).toUpperCase() + key.slice(1),\n    editable: true\n  }));\n}\n", "/**\n * Creates a plugin that applies striping classes to rendered rows.\n *\n * @param {{ className?: string }} [options]\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function stripedRowsPlugin(options = {}) {\n  const className = options.className || 'vt-row-striped';\n\n  return (table) => {\n    table.registerHook('afterRowRender', ({ element }) => {\n      const index = Array.from(element.parentElement.children).indexOf(element);\n      if (index % 2 === 1) {\n        element.classList.add(className);\n      }\n    });\n  };\n}\n", "/**\n * Creates a theme plugin that maps semantic keys to CSS classes.\n *\n * @param {Record<string, string>} classes\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function themePlugin(classes) {\n  return (table) => {\n    table.setThemeClasses(classes || {});\n  };\n}\n", "import { themePlugin } from './theme-plugin.js';\n\n/**\n * Creates a Bootstrap-compatible theme plugin.\n *\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function bootstrapThemePlugin() {\n  return themePlugin({\n    shell: 'border-0 rounded-0 bg-transparent',\n    controls: 'd-flex flex-wrap gap-2 align-items-center justify-content-between w-100',\n    searchWrap: 'd-inline-flex align-items-center gap-2',\n    sizeWrap: 'd-inline-flex align-items-center gap-2',\n    searchInput: 'form-control form-control-sm',\n    sizeSelect: 'form-select form-select-sm',\n    tableWrap: 'table-responsive',\n    table: 'table table-hover table-striped mb-0',\n    sortTrigger: 'btn btn-sm p-0 border-0 bg-transparent text-body fw-semibold',\n    actionHeader: 'text-body fw-semibold small',\n    columnFilter: 'form-control form-control-sm',\n    actionSelect: 'form-select form-select-sm w-auto',\n    actionButton: 'btn btn-outline-secondary btn-sm',\n    footer: 'd-flex justify-content-between align-items-center mt-2',\n    paginationGroup: 'd-inline-flex align-items-center gap-2 ms-auto',\n    firstButton: 'btn btn-outline-secondary btn-sm',\n    prevButton: 'btn btn-outline-secondary btn-sm',\n    nextButton: 'btn btn-outline-secondary btn-sm',\n    lastButton: 'btn btn-outline-secondary btn-sm',\n    expandTrigger: 'btn btn-outline-primary btn-sm',\n    editableCell: 'bg-light-subtle'\n  });\n}\n", "import { themePlugin } from './theme-plugin.js';\n\n/**\n * Creates a Bulma-compatible theme plugin.\n *\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function bulmaThemePlugin() {\n  return themePlugin({\n    shell: 'is-block',\n    controls: 'level is-mobile mb-3',\n    searchWrap: 'field has-addons',\n    sizeWrap: 'field has-addons',\n    searchInput: 'input is-small',\n    sizeSelect: 'select is-small',\n    tableWrap: 'table-container',\n    table: 'table is-fullwidth is-hoverable is-striped',\n    sortTrigger: 'button is-white is-small',\n    columnFilter: 'input is-small',\n    footer: 'level mt-3',\n    paginationGroup: 'buttons are-small',\n    firstButton: 'button is-light is-small',\n    prevButton: 'button is-light is-small',\n    nextButton: 'button is-light is-small',\n    lastButton: 'button is-light is-small',\n    expandTrigger: 'button is-info is-light is-small',\n    editableCell: 'has-background-light',\n    actionButton: 'button is-small is-primary is-light',\n    actionSelect: 'select is-small',\n    actionHeader: 'has-text-weight-semibold',\n    fixedHeader: 'has-background-white-ter',\n    fixedFooter: 'has-background-white-ter'\n  });\n}\n", "import { themePlugin } from './theme-plugin.js';\n\n/**\n * Creates a Material UI-like utility class theme plugin.\n *\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function muiThemePlugin() {\n  return themePlugin({\n    shell: 'MuiBox-root',\n    controls: 'MuiToolbar-root MuiToolbar-gutters',\n    searchWrap: 'MuiFormControl-root',\n    sizeWrap: 'MuiFormControl-root',\n    searchInput: 'MuiInputBase-input MuiInputBase-sizeSmall',\n    sizeSelect: 'MuiNativeSelect-select MuiInputBase-input MuiInputBase-sizeSmall',\n    tableWrap: 'MuiTableContainer-root',\n    table: 'MuiTable-root',\n    headerCell: 'MuiTableCell-root MuiTableCell-head',\n    bodyCell: 'MuiTableCell-root',\n    sortTrigger: 'mui-sort-trigger',\n    columnFilter: 'MuiInputBase-input MuiInputBase-sizeSmall',\n    footer: 'MuiToolbar-root MuiToolbar-gutters',\n    paginationGroup: 'MuiPagination-root',\n    firstButton: 'MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-sizeSmall',\n    prevButton: 'MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-sizeSmall',\n    nextButton: 'MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-sizeSmall',\n    lastButton: 'MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-sizeSmall',\n    expandTrigger: 'MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-sizeSmall',\n    editableCell: 'MuiTableCell-editable',\n    actionButton: 'MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-sizeSmall',\n    actionSelect: 'MuiNativeSelect-select MuiInputBase-input MuiInputBase-sizeSmall',\n    actionHeader: 'MuiTableCell-root MuiTableCell-head',\n    fixedHeader: 'MuiTable-stickyHeader',\n    fixedFooter: 'MuiTableFooter-root',\n    fixedColumn: 'MuiTableCell-sticky'\n  });\n}\n", "import { themePlugin } from './theme-plugin.js';\n\n/**\n * Creates a Tailwind-compatible theme plugin.\n *\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function tailwindThemePlugin() {\n  return themePlugin({\n    shell: 'block',\n    controls: 'flex flex-wrap items-center justify-between gap-3 border-b border-slate-200 p-3',\n    searchWrap: 'inline-flex items-center gap-2 text-sm text-slate-700',\n    sizeWrap: 'inline-flex items-center gap-2 text-sm text-slate-700',\n    searchInput: 'rounded-md border border-slate-300 px-2 py-1 text-sm',\n    sizeSelect: 'rounded-md border border-slate-300 px-2 py-1 text-sm',\n    tableWrap: 'overflow-x-auto',\n    table: 'min-w-full divide-y divide-slate-200',\n    headerCell: 'bg-slate-50 px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-600',\n    bodyRow: 'border-b border-slate-100',\n    bodyCell: 'px-3 py-2 text-sm text-slate-800',\n    sortTrigger: 'inline-flex items-center gap-1 text-xs font-semibold text-slate-700 hover:text-slate-900',\n    columnFilter: 'w-full rounded-md border border-slate-300 px-2 py-1 text-sm',\n    filterRow: 'bg-white',\n    filterHeaderCell: 'bg-white px-3 py-2',\n    footer: 'flex items-center justify-between gap-2 border-t border-slate-200 p-3',\n    paginationGroup: 'inline-flex items-center gap-2 ml-auto',\n    firstButton: 'rounded-md border border-slate-300 px-2 py-1 text-sm hover:bg-slate-50',\n    prevButton: 'rounded-md border border-slate-300 px-2 py-1 text-sm hover:bg-slate-50',\n    nextButton: 'rounded-md border border-slate-300 px-2 py-1 text-sm hover:bg-slate-50',\n    lastButton: 'rounded-md border border-slate-300 px-2 py-1 text-sm hover:bg-slate-50',\n    info: 'text-sm text-slate-600',\n    expandTrigger: 'rounded-md border border-slate-300 px-2 py-0.5 text-sm hover:bg-slate-50',\n    editableCell: 'bg-amber-50',\n    actionsCell: 'px-3 py-2',\n    actionButton: 'rounded-md border border-slate-300 px-2 py-1 text-xs hover:bg-slate-50',\n    actionSelect: 'rounded-md border border-slate-300 bg-white px-2 py-1 text-sm',\n    actionHeader: 'bg-slate-50 px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-600',\n    emptyCell: 'px-3 py-6 text-center text-sm text-slate-500',\n    expandContent: 'bg-slate-50 px-3 py-2 text-sm text-slate-700',\n    fixedHeader: 'sticky top-0 z-10',\n    fixedFooter: 'sticky bottom-0 z-10 bg-white',\n    fixedColumn: 'bg-white'\n  });\n}\n", "/**\n * Creates a plugin that renders row actions as a compact dropdown.\n *\n * @param {{ placeholder?: string }} [options]\n * @returns {(table: import('../core/vanilla-table.js').VanillaTable) => void}\n */\nexport function actionsDropdownPlugin(options = {}) {\n  return (table) => {\n    table.registerHook('afterRowRender', ({ element }) => {\n      const cell = element.querySelector('.vt-actions-cell');\n      if (!cell) return;\n\n      const buttons = [...cell.querySelectorAll('.vt-action-btn')];\n      if (buttons.length < 2) return;\n\n      const select = document.createElement('select');\n      select.className = table.renderer?.theme?.classOf\n        ? table.renderer.theme.classOf('actionSelect', 'vt-action-select')\n        : 'vt-action-select';\n\n      const placeholder = document.createElement('option');\n      placeholder.value = '';\n      placeholder.textContent = options.placeholder || 'Actions';\n      select.appendChild(placeholder);\n\n      buttons.forEach((button) => {\n        const option = document.createElement('option');\n        option.value = button.dataset.actionId || '';\n        option.textContent = button.textContent || button.dataset.actionId || '';\n        select.appendChild(option);\n      });\n\n      select.addEventListener('change', () => {\n        const id = select.value;\n        if (!id) return;\n\n        const rowId = element.dataset.rowId;\n        const row = table.findRowById(rowId);\n        const action = table.options.rowActions.find((item) => item.id === id);\n        if (action && row) {\n          Promise.resolve(\n            action.onClick ? action.onClick({ row, rowId, actionId: id, table, event: new Event('change') }) : null\n          ).finally(() => {\n            table.emitEvent('row:action', { row, rowId, actionId: id });\n            table.refresh();\n          });\n        }\n\n        select.value = '';\n      });\n\n      cell.innerHTML = '';\n      cell.appendChild(select);\n    });\n  };\n}\n", "/**\n * Creates a REST fetch adapter.\n *\n * @param {{ endpoint: string, method?: 'GET'|'POST', headers?: Record<string, string>, mapResponse?: (response: any) => { rows: any[], totalRows: number } }} config\n * @returns {(query: Record<string, any>) => Promise<{ rows: any[], totalRows: number }>}\n */\nexport function createRestAdapter({ endpoint, method = 'GET', headers = {}, mapResponse }) {\n  return (query) => {\n    const upper = method.toUpperCase();\n    const isGet = upper === 'GET';\n\n    let url = endpoint;\n    const init = {\n      method: upper,\n      headers: {\n        'Content-Type': 'application/json',\n        ...headers\n      }\n    };\n\n    if (isGet) {\n      const params = new URLSearchParams({ q: JSON.stringify(query) });\n      url = `${endpoint}${endpoint.includes('?') ? '&' : '?'}${params.toString()}`;\n    } else {\n      init.body = JSON.stringify(query);\n    }\n\n    return fetch(url, init)\n      .then((response) => response.json())\n      .then((payload) => (mapResponse ? mapResponse(payload) : payload));\n  };\n}\n\n/**\n * Creates a GraphQL fetch adapter.\n *\n * @param {{ endpoint: string, query: string, variablesKey?: string, headers?: Record<string, string>, mapResponse?: (response: any) => { rows: any[], totalRows: number } }} config\n * @returns {(tableQuery: Record<string, any>) => Promise<{ rows: any[], totalRows: number }>}\n */\nexport function createGraphQLAdapter({ endpoint, query, variablesKey = 'tableQuery', headers = {}, mapResponse }) {\n  return (tableQuery) =>\n    fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...headers\n      },\n      body: JSON.stringify({\n        query,\n        variables: {\n          [variablesKey]: tableQuery\n        }\n      })\n    })\n      .then((response) => response.json())\n      .then((payload) => (mapResponse ? mapResponse(payload) : payload));\n}\n\n/**\n * Creates a cursor pagination adapter.\n *\n * @param {{ fetchPage: (args: { cursor: string | null, pageSize: number, searchTerm: string, columnFilters: Record<string, string>, sorts: { key: string, direction: 'asc'|'desc' }[] }) => Promise<{ rows: any[], nextCursor: string | null, totalRows?: number }> }} config\n * @returns {(tableQuery: Record<string, any>) => Promise<{ rows: any[], totalRows: number }>}\n */\nexport function createCursorAdapter({ fetchPage }) {\n  let lastCursor = null;\n\n  return (tableQuery) => {\n    if (tableQuery.page <= 1) {\n      lastCursor = null;\n    }\n\n    return Promise.resolve(\n      fetchPage({\n        cursor: lastCursor,\n        pageSize: tableQuery.pageSize,\n        searchTerm: tableQuery.searchTerm,\n        columnFilters: tableQuery.columnFilters,\n        sorts: tableQuery.sorts\n      })\n    ).then((result) => {\n      lastCursor = result.nextCursor || null;\n      return {\n        rows: result.rows || [],\n        totalRows: Number(result.totalRows || (result.rows || []).length)\n      };\n    });\n  };\n}\n"],
  "mappings": "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",
  "names": ["index_exports", "__export", "VanillaTable", "actionsDropdownPlugin", "bootstrapThemePlugin", "bulmaThemePlugin", "createCursorAdapter", "createGraphQLAdapter", "createRestAdapter", "createVanillaTable", "muiThemePlugin", "stripedRowsPlugin", "tailwindThemePlugin", "themePlugin", "defaultI18n", "defaultOptions", "defaultI18n", "page", "totalPages", "totalRows", "ShellRenderer", "root", "options", "theme", "refs", "size", "HeaderRenderer", "options", "theme", "thead", "columns", "sortState", "columnFilters", "applyFixedColumn", "columnWidths", "headRows", "sortRow", "expandHeader", "column", "index", "th", "button", "sortIndex", "item", "sortMeta", "marker", "resizeHandle", "actionTh", "filterRow", "expandFilterHeader", "input", "row", "appendClassNames", "element", "classNames", "name", "BodyRenderer", "options", "hooks", "theme", "tbody", "columns", "rows", "meta", "applyFixedColumn", "tr", "td", "renderSlice", "topSpacer", "topCell", "row", "localIndex", "index", "rowId", "appendClassNames", "expandTd", "expandButton", "column", "columnIndex", "raw", "escapeHtml", "actionTd", "action", "button", "expanded", "expandedCell", "bottomSpacer", "bottomCell", "value", "element", "classNames", "name", "FooterRenderer", "options", "refs", "page", "totalPages", "totalRows", "loading", "ThemeManager", "classes", "key", "base", "extra", "Renderer", "root", "options", "hooks", "ThemeManager", "ShellRenderer", "HeaderRenderer", "BodyRenderer", "FooterRenderer", "columns", "sortState", "columnFilters", "columnWidths", "cell", "visualIndex", "rows", "meta", "details", "left", "i", "key", "appendClassNames", "element", "classNames", "name", "ProjectionWorkerPool", "size", "timeoutMs", "retries", "i", "slot", "rows", "data", "shardSize", "index", "start", "end", "query", "chunks", "worker", "getWorkerUrl", "event", "payload", "pending", "reject", "retriesLeft", "id", "timeoutHandle", "resolve", "onReject", "error", "onResolve", "result", "sorts", "pointers", "output", "bestChunk", "bestIndex", "pointer", "chunk", "currentIndex", "comparison", "compareRowsBySorts", "cachedWorkerUrl", "source", "leftRow", "rightRow", "sort", "leftRaw", "rightRaw", "leftNum", "rightNum", "leftFinite", "rightFinite", "leftText", "rightText", "StateStore", "rows", "pageSize", "initialSort", "parallel", "parallelWorkers", "resolveParallelWorkers", "ProjectionWorkerPool", "searchTerm", "key", "value", "normalized", "page", "additive", "maxSorts", "existingIndex", "item", "current", "sorts", "order", "width", "visible", "payload", "affectsProjection", "affectsFilters", "columns", "map", "column", "ordered", "selected", "rest", "sorted", "start", "columnSet", "activeFilters", "index", "filterColumns", "term", "output", "i", "matches", "filterColumn", "row", "keys", "searchColumns", "searchColumn", "hasFilters", "hasSorts", "columnsKey", "filtered", "filtersKey", "indices", "matchesFilters", "matchesSearch", "rowCount", "_", "sourceIndexes", "allIndexed", "sourceIndex", "descriptors", "sort", "text", "num", "isNum", "indexedText", "indexedNumeric", "raw", "parsed", "comparator", "leftIndex", "rightIndex", "descriptor", "diff", "leftText", "rightText", "mergeSort", "active", "leftKey", "rightKey", "compareText", "rowIndex", "cached", "values", "flags", "next", "HAS_ALPHA_RE", "hasAlpha", "left", "right", "items", "compare", "size", "buffer", "middle", "end", "write", "input", "cores", "numeric", "deepMerge", "base", "extra", "output", "key", "baseValue", "extraValue", "isObject", "value", "EventEmitter", "event", "callback", "list", "item", "payload", "ClientDataSource", "store", "columns", "ServerDataSource", "store", "fetchData", "onLoadingChange", "query", "response", "rows", "totalRows", "createDataSource", "options", "store", "onLoadingChange", "ServerDataSource", "ClientDataSource", "StateSync", "persistence", "urlSync", "tableId", "fromUrl", "state", "key", "raw", "parsed", "encoded", "json", "params", "next", "VanillaTable", "element", "rows", "options", "deepMerge", "defaultOptions", "page", "totalPages", "totalRows", "inferColumns", "EventEmitter", "StateStore", "initialOrder", "column", "Renderer", "createDataSource", "loading", "StateSync", "columns", "view", "row", "index", "error", "event", "applySearch", "button", "input", "trigger", "rowId", "cell", "key", "submit", "keyboardEvent", "actionButton", "actionId", "action", "item", "handle", "startX", "startWidth", "onMove", "moveEvent", "nextWidth", "onUp", "draggingKey", "th", "targetTh", "targetKey", "next", "targetIndex", "resizeHandle", "current", "delta", "currentOrder", "term", "value", "direction", "additive", "pageSize", "normalized", "editable", "width", "order", "visible", "classes", "payload", "callback", "plugin", "name", "synced", "wrap", "rowHeight", "overscan", "visibleCount", "start", "end", "stripedRowsPlugin", "options", "className", "table", "element", "themePlugin", "classes", "table", "bootstrapThemePlugin", "themePlugin", "bulmaThemePlugin", "themePlugin", "muiThemePlugin", "themePlugin", "tailwindThemePlugin", "themePlugin", "actionsDropdownPlugin", "options", "table", "element", "cell", "buttons", "select", "placeholder", "button", "option", "id", "rowId", "row", "action", "item", "createRestAdapter", "endpoint", "method", "headers", "mapResponse", "query", "upper", "isGet", "url", "init", "params", "response", "payload", "createGraphQLAdapter", "variablesKey", "tableQuery", "createCursorAdapter", "fetchPage", "lastCursor", "result", "createVanillaTable", "element", "rows", "options", "VanillaTable"]
}
